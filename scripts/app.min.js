function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){_defineProperty(t,e,a[e])})}return t}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}document.addEventListener("DOMContentLoaded",function(){new SmoothScroll('a[href*="#"]',{speed:1e3,speedAsDuration:!0});var e=document.querySelector(".page");e.classList.remove("page_no_js"),e.classList.add("page_js");document.addEventListener("keydown",function(e){if(27===e.keyCode){var t=document.querySelectorAll(".modal");t&&t.forEach(function(e){e.classList.contains("modal--invisible")||(e.classList.add("modal--invisible","fadeOut"),e.classList.remove("fadeIn")),document.body.style.cssText="padding-right: ''; overflow: ''"}),document.body.classList.remove("page--overlay")}}),document.addEventListener("click",function(e){var t=e.target;t.classList.contains("page--overlay")&&(t.classList.remove("page--overlay"),t.querySelectorAll(".modal").forEach(function(e){e.classList.contains("modal--invisible")||(e.classList.add("modal--invisible","fadeOut"),e.classList.remove("fadeIn")),document.body.style.cssText="padding-right: ''; overflow: ''"}))})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".main-nav__trigger"),a=function(e,t){var a=t.closest(".main-nav").querySelector(".main-nav-list");switch(e){case"close":t.classList.remove("main-nav__trigger--open-menu"),t.classList.add("main-nav__trigger--close-menu"),t.setAttribute("aria-label","Close menu"),t.querySelector("use").setAttribute("xlink:href","#main-nav__close"),a&&(a.classList.remove("main-nav-list--hidden","fadeOut"),a.classList.add("animated","fadeIn"));break;case"open":t.classList.remove("main-nav__trigger--close-menu"),t.classList.add("main-nav__trigger--open-menu"),t.setAttribute("aria-label","Open menu"),t.querySelector("use").setAttribute("xlink:href","#main-nav__menu"),a&&(a.classList.add("main-nav-list--hidden","fadeOut"),a.classList.remove("main-nav-list--hidden","fadeIn"));break;default:throw new Error("Unknown state: ".concat(e))}};e&&e.addEventListener("click",function(e){var t=e.currentTarget;t.classList.contains("main-nav__trigger--open-menu")?a("close",t):t.classList.contains("main-nav__trigger--close-menu")&&a("open",t)})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#page-header-login");e&&e.addEventListener("click",function(e){var t=e.target,a=document.querySelector("#".concat(t.dataset.modal," form")),n=null,r=null;a&&(n=a.querySelector('[type="submit"]'),r=a.elements.login);var o=document.getElementById(t.dataset.modal);o&&(o.classList.remove("modal--invisible","fadeOut"),o.classList.add("animated","fadeIn")),document.body.classList.contains("page--overlay")||document.body.classList.add("page--overlay","page--no-scroll");var i=window.innerWidth-document.documentElement.clientWidth;document.body.style.cssText="background-color: #f6f7ff; padding-right: ".concat(i,"px;"),localStorage.getItem("loginFormData")?n&&n.focus():r&&r.focus()})}),document.addEventListener("DOMContentLoaded",function(){new Swiper(".about",{loop:!0,speed:500,spaceBetween:10,noSwiping:!1,autoplay:{delay:3e3},pagination:{el:".swiper-pagination",type:"bullets",clickable:"false"},breakpoints:{1024:{noSwiping:!0,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},autoplay:{delay:4e3}}}})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("#services .services__list-item"),t=document.querySelectorAll("#services .services__link"),r=document.querySelectorAll("#services .tab-services");if(t&&r){["click","keyup"].forEach(function(e){t.forEach(function(i,c){i.addEventListener(e,function(e){return a=i,n=c,r=(t=e).type,o=t.keyCode,void("click"===r?(t.preventDefault(),l(),s(a,n)):"keyup"===r&&9===o&&(l(),s(a,n)));var t,a,n,r,o})})});var l=function(){t.forEach(function(e){e.closest(".services__list-item").classList.remove("services__list-item--active")}),r.forEach(function(e){e.classList.remove("tab-services--active")})},s=function(e,a){e.closest(".services__list-item").classList.add("services__list-item--active");var n=Array.from(r).findIndex(function(e,t){return t===a});r.forEach(function(e,t){t===n&&e.classList.add("tab-services--active")})}}var a=window.matchMedia("only screen and (max-width: 1023px)"),n=null,o=function(e,t){e.forEach(function(e){return e.classList.contains("".concat(t))?e.classList.remove("".concat(t)):e})},i=function(e,a){e.forEach(function(e,t){return 0===t?e.classList.add("".concat(a)):e.classList.remove("".concat(a))})},c=function(){a.matches?(n=new Swiper("#services",{loop:!0,speed:500,spaceBetween:10,autoplay:{delay:3e3},pagination:{el:".swiper-pagination",type:"bullets",clickable:"false"}}),r&&e&&(o(r,"tab-service--active"),o(e,"services__list-item--active"))):n&&(n.destroy(),r&&e&&(i(r,"tab-service--active"),i(e,"services__list-item--active")))};c(),a.addListener(c)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#calculator"),t=null,a=null,n=null,c=null,P=null,x=null,r=null,l=null,s=null;if(e&&((t=e.querySelector("#credit-selection"))&&(a=t.querySelector("input"),n=t.querySelector(".calculator__form-field")),c=e.querySelectorAll(".calculator__credit-form--calculation form"),P=e.querySelector("#credit-offer"),x=e.querySelector("#credit-registration"),r=e.querySelectorAll(".calculator__message"))){var o=Array.from(r).filter(function(e){return!!e.classList.contains("calculator__message--reject")&&e}),i=_slicedToArray(o,1);l=i[0];var u=Array.from(r).filter(function(e){return!!e.classList.contains("calculator__message--error")&&e}),d=_slicedToArray(u,1);s=d[0]}var m=function(e,t,a){e.addEventListener("focus",function(){t.classList.contains("".concat(a,"--focus"))||t.classList.add("".concat(a,"--focus"))}),e.addEventListener("blur",function(){t.classList.contains("".concat(a,"--focus"))&&t.classList.remove("".concat(a,"--focus"))})},f=function(e){e.addEventListener("keydown",function(e){var t=e.keyCode,a=e.target;13!==t&&32!==t||a.click()})},v=function(e,t){var a=(e=Math.abs(e)%100)%10;return 10<e&&e<20?t[2]:1<a&&a<5?t[1]:1===a?t[0]:t[2]},W=function(e,t){return 100*e/t},C=function(e,t){return e%t==0?Math.floor(e/t)*t:Math.floor(e/t)*t+t},M=function(e,t){switch(e){case"currency":e=" ".concat(v(Number(t),p));break;case"percent":e="%";break;case"numero-sign":e="№";break;case"period":e=" ".concat(v(Number(t),y));break;case"empty":e="";break;default:throw new Error("Unknown unit: ".concat(e))}return e},D=function(e,t){switch(t){case"integer":return{mask:"VALUE".concat(e),lazy:!1,blocks:{VALUE:{mask:Number,scale:0,signed:!1,thousandsSeparator:" "}}};case"4-digit integer":return{mask:"".concat(e," VALUE"),blocks:{VALUE:{mask:/^\d+$/,commit:function(e,t){return t._value=e.padStart(4,"0")}}}};case"fractional":return{mask:"VALUE".concat(e),lazy:!1,blocks:{VALUE:{mask:Number,scale:2,signed:!1,padFractionalZeros:!0,radix:","}}};case"string":return{mask:"VALUE",blocks:{VALUE:{mask:String}}};case"tel":return{mask:"+{7}(000)000-00-00",lazy:!0};case"full-name":return{mask:/^[a-zA-Zа-яА-ЯёЁ ]+$/};case"email":return{mask:/^\S*@?\S*$/};default:throw new Error("Unknown mask's format: ".concat(t))}},p=["рубль","рубля","рублей"],y=["год","года","лет"];if(n&&n.addEventListener("click",function(e){event.stopPropagation();var a=e.currentTarget;a.classList.toggle("calculator__form-field--open"),document.addEventListener("click",function(e){e.stopImmediatePropagation();var t=a.getBoundingClientRect();t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width||a.classList.contains("calculator__form-field--open")&&a.classList.remove("calculator__form-field--open")})}),t){var b=e&&e.querySelectorAll(".calculator__col");t.querySelectorAll(".calculator__forms-list-item").forEach(function(e){e.addEventListener("click",function(e){var t=e.target;c&&c.forEach(function(e){e.name!==t.dataset.creditType?e.hidden=!0:(e.hidden=!1,b.forEach(function(e){e.classList.contains("calculator__col--right")&&e.classList.contains("calculator__col--invisible")&&e.classList.remove("calculator__col--invisible")}),e.dispatchEvent(new Event("change")))}),x&&(x.hidden=!0),a&&(a.value=t.textContent,a.parentElement.classList.remove("calculator__form-field--open"))}),m(e,e.parentElement.previousElementSibling,"calculator__form-field"),f(e)})}var F=[];c&&c.forEach(function(e){var t=e.querySelectorAll('input[type="text"], input[type="range"]'),a=e.querySelectorAll("button");t&&t.forEach(function(e){var t=M(e.dataset.unit,e.value);F.push(IMask(e,D(t,e.dataset.format)))}),a&&a.forEach(function(e){e.addEventListener("click",function(e){var t=e.target,a=t.closest(".calculator__form-field"),n=t.name,r=F.find(function(e){return e.el.input.id===a.querySelector("input").id}),o=r.el.input.dataset,i=o.min,c=void 0===i?"":i,l=o.max,s=void 0===l?"":l,u=o.step,d=void 0===u?"":u,m=o.unit,f=void 0===m?"":m,v=o.format,p=void 0===v?"":v;if(Number.isNaN(Number(r.unmaskedValue))){var y=M(f,r.unmaskedValue);r.updateOptions(D(y,p)),r.value="".concat(Number(c)),r.el.input.dispatchEvent(new Event("change",{bubbles:!0})),a&&a.classList.contains("calculator__form-field--invalid")&&a.classList.remove("calculator__form-field--invalid")}else{var b=0;"plus"===n?(b=Number(r.unmaskedValue)+Number(d))>Number(s)&&(b="".concat(Number(s))):"minus"===n&&(b=Number(r.unmaskedValue)-Number(d))<Number(c)&&(b="".concat(Number(c))),r.value="".concat(b),r.el.input.dispatchEvent(new Event("change",{bubbles:!0}))}})}),e.querySelectorAll(".calculator__form-field > button, .calculator__form-field > input").forEach(function(e){m(e,e.parentElement,"calculator__form-field")}),e.querySelectorAll("label").forEach(function(e){return f(e)})}),F.forEach(function(q){var t=q.el.input,O=t.closest(".calculator__form-field"),I=null;O&&(I=O.querySelectorAll("button"));t.addEventListener("input",function(){var e=M(t.dataset.unit,q.unmaskedValue);q.updateOptions(D(e,t.dataset.format))}),t.addEventListener("change",function(e){var t=e.target,a=t.dataset,n=a.min,r=void 0===n?"":n,o=a.max,i=void 0===o?"":o,c=a.step,l=void 0===c?"":c,s=a.unit,u=void 0===s?"":s,d=a.format,m=void 0===d?"":d,f="-credit-",v=t.name.split("".concat(f)),p=_slicedToArray(v,2),y=p[0],b=p[1],g=F.filter(function(e){return e.el.input.name==="".concat(y).concat(f,"cost")}),_=_slicedToArray(g,1)[0],h=F.filter(function(e){return e.el.input.name==="".concat(y).concat(f,"initial-payment")}),k=_slicedToArray(h,1)[0],L=F.filter(function(e){return e.el.input.name==="".concat(y).concat(f,"initial-payment-range")}),w=_slicedToArray(L,1)[0],E=document.querySelector("#".concat(y).concat(f,"initial-payment-percent")),S=F.filter(function(e){return e.el.input.name==="".concat(y).concat(f,"period")}),A=_slicedToArray(S,1)[0],N=F.filter(function(e){return e.el.input.name==="".concat(y).concat(f,"period-range")}),T=_slicedToArray(N,1)[0],V="";switch(b){case"cost":Number(q.unmaskedValue)<Number(r)||Number(q.unmaskedValue)>Number(i)?(q.updateOptions(D("","string")),q.value="Некорректное значение",k&&(k.value="0"),O&&!O.classList.contains("calculator__form-field--invalid")&&O.classList.add("calculator__form-field--invalid"),k&&w&&[k,w].forEach(function(e){e.value="0",e.el.input.disabled=!0})):(k&&(k.value="".concat(Number(_.unmaskedValue)*(Number(k.el.input.dataset.min)/100)),w&&(w.value="".concat(Number(w.el.input.min)))),I&&I.forEach(function(e){return e.disabled=!1}),k&&w&&[k,w].forEach(function(e){return e.el.input.disabled=!1}));break;case"initial-payment":Number(q.unmaskedValue)>=Number(_.unmaskedValue)?(q.value="".concat(Number(_.unmaskedValue)),w&&(w.value="".concat(i))):W(Number(q.unmaskedValue),_.unmaskedValue)<Number(r)&&(q.value="".concat(Number(_.unmaskedValue)/Number(r)),w&&(w.value="".concat(r))),w&&(w.value="".concat(C(W(Number(q.unmaskedValue),Number(_.unmaskedValue)),Number(l)))),V=M(u,q.unmaskedValue),q.updateOptions(D(V,m));break;case"initial-payment-range":k&&(k.value="".concat(Number(_.unmaskedValue)*(Number(q.unmaskedValue)/100)),k.el.input.dispatchEvent(new Event("change",{bubbles:!0})),E&&(E.textContent="".concat(Number(q.unmaskedValue),"%")));break;case"period":Number(q.unmaskedValue)>Number(i)?(q.value="".concat(Number(i)),q.updateOptions(D(q,m)),T&&(T.value="".concat(i))):Number(q.unmaskedValue)<Number(r)&&(q.value="".concat(Number(r)),q.updateOptions(D(u,m)),T&&(T.value="".concat(r))),T&&(T.value="".concat(C(Number(q.unmaskedValue),Number(l)))),V=M(u,q.unmaskedValue),q.updateOptions(D(V,m));break;case"period-range":A&&(A.value="".concat(Number(q.unmaskedValue)),A.el.input.dispatchEvent(new Event("change",{bubbles:!0})));break;default:throw new Error("Unknown field's modifier: ".concat(b))}x&&(x.hidden||(x.hidden=!0))}),t.addEventListener("focus",function(){O&&O.classList.contains("calculator__form-field--invalid")&&O.classList.remove("calculator__form-field--invalid")})});var R=function(e,t,a){return Math.ceil(e*(t/(1-Math.pow(1+t,-1*Math.abs(a)))))},z=function(e){return Math.ceil(e/45*100)},B=function(e){return Number((e/100/12).toFixed(5))},H=function(e,t,a){var n=new Map([["mortgage","ипотечные"],["auto","автомобильные"],["personal","потребительские"]]);if(t<a){var r=l.querySelectorAll("span"),o=_slicedToArray(r,2),i=o[0],c=o[1];i.textContent=n.get("".concat(e)),c.textContent="".concat(a.toLocaleString("en-US").replace(/,/g," ")," ").concat(v(a,p)),l.classList.remove("calculator__message--invisible"),P.hidden=!0}else l.classList.add("calculator__message--invisible"),P.hidden=!1;Number.isNaN(t)?(s.classList.remove("calculator__message--invisible"),P.hidden=!0):s.classList.add("calculator__message--invisible")},J=new Map([["mortgage","Сумма ипотеки"],["auto","Сумма автокредита"],["period","Сумма кредита"]]);if(P){var g=P.querySelectorAll("input");g&&g.forEach(function(e){var t=M(e.dataset.unit,e.value);F.push(IMask(e,D(t,e.dataset.format)))}),P.querySelector("button").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),x.hidden=!1})}var Z=function(e,t){var c=t.creditSum,l=t.interestRate,s=t.annuityPayment,u=t.requiredIncome;e.forEach(function(e){var t=e.el.input.dataset,a=t.unit,n=t.format,r=e.el.input.name,o=r.split("".concat("-offer-")),i="";switch(_slicedToArray(o,2)[1]){case"credit-sum":e.value="".concat(c),i=M(a,e.unmaskedValue),e.updateOptions(D(i,n));break;case"interest-rate":e.value="".concat(l),i=M(a,e.unmaskedValue),e.updateOptions(D(i,n));break;case"annuity-payment":e.value="".concat(s),i=M(a,e.unmaskedValue),e.updateOptions(D(i,n));break;case"required-income":e.value="".concat(u),i=M(a,e.unmaskedValue),e.updateOptions(D(i,n));break;default:throw new Error("Unknown field's name: ".concat(r))}})},_=function(e){var t=e.currentTarget,a="-credit-",n=t.name.split("-"),r=_slicedToArray(n,2)[1],o=F.filter(function(e){return e.el.input.name==="".concat(r).concat(a,"cost")}),i=_slicedToArray(o,1)[0],c=F.filter(function(e){return e.el.input.name==="".concat(r).concat(a,"initial-payment")}),l=_slicedToArray(c,1)[0],s=F.filter(function(e){return e.el.input.name==="".concat(r).concat(a,"period")}),u=_slicedToArray(s,1)[0];P&&(P.querySelector('label[for="credit-offer-credit-sum"]').textContent=J.get("".concat(r)));var d=12*Number(u.unmaskedValue),m=Array.from(F).filter(function(e){return e.el.input.name.includes("offer")});if(i&&u)switch(r){case"mortgage":var f=Array.from(t.elements).filter(function(e){return e.name==="".concat(r).concat(a,"maternity-capital")}),v=_slicedToArray(f,1)[0];if(l&&v){var p=v.checked?47e4:0,y=Number(i.unmaskedValue)-Number(l.unmaskedValue)-p,b=W(Number(l.unmaskedValue),Number(i.unmaskedValue)),g=0;b<15?g=9.4:15<=b&&(g=8.5);var _=B(g),h=R(y,_,d),k=z(h);H(r,y,5e5),Z(m,{creditSum:y,interestRate:g,annuityPayment:h,requiredIncome:k})}break;case"auto":var L=Array.from(t.elements).filter(function(e){return e.name==="".concat(r).concat(a,"car-insurance")}),w=_slicedToArray(L,1)[0],E=Array.from(t.elements).filter(function(e){return e.name==="".concat(r).concat(a,"life-insurance")}),S=_slicedToArray(E,1)[0];if(l&&w&&S){var A=Number(i.unmaskedValue)-Number(l.unmaskedValue),N=0;Number(i.unmaskedValue)<2e6?N=16:2e6<Number(i.unmaskedValue)&&(N=15),(w.checked||S.checked)&&(N=8.5),w.checked&&S.checked&&(N=3.5);var T=B(N),V=R(A,T,d),q=z(V);H(r,A,2e5),Z(m,{creditSum:A,interestRate:N,annuityPayment:V,requiredIncome:q})}break;case"personal":var O=Array.from(t.elements).filter(function(e){return e.name==="".concat(r).concat(a,"project-member")}),I=_slicedToArray(O,1)[0];if(I){var x=Number(i.unmaskedValue),C=I.checked?.5:0,M=0;Number(i.unmaskedValue)<75e4?M=15-C:Number(i.unmaskedValue)<=75e4&&Number(i.unmaskedValue)<2e6?M=12.5-C:2e6<Number(i.unmaskedValue)&&(M=9.5-C);var D=B(M),j=R(x,D,d),U=z(j);H(r,x,0),Z(m,{creditSum:x,interestRate:M,annuityPayment:j,requiredIncome:U})}break;default:throw new Error("Unknown form's modifier: ".concat(r))}};if(x){var h=x.name,k=x.querySelectorAll("input");k&&k.forEach(function(e){var t=M(e.dataset.unit,e.value);F.push(IMask(e,D(t,e.dataset.format)))});var L=F.filter(function(e){return e.el.input.name==="".concat(h,"-full-name")}),w=_slicedToArray(L,1)[0],E=F.filter(function(e){return e.el.input.name==="".concat(h,"-email")}),S=_slicedToArray(E,1)[0],A=F.filter(function(e){return e.el.input.name==="".concat(h,"-tel")}),N=_slicedToArray(A,1)[0],T=F.filter(function(e){return e.el.input.name==="".concat(h,"-application-number")}),V=_slicedToArray(T,1)[0],q=localStorage.getItem("registrationFormData")?JSON.parse(localStorage.getItem("registrationFormData")):{fullName:"",tel:"",email:""},O=q.fullName,I=q.tel,j=q.email;w&&(w.value=O),S&&(S.value=j),N&&(N.value=I),V&&(V.value="1")}var U=function(e){var t=e.currentTarget,a=function(e){var t=e.el.input.dataset,a=t.unit,n=t.format,r=M(a,e.unmaskedValue);e.updateOptions(D(r,n))},n="-credit-",r=t.name.split("-"),o=_slicedToArray(r,2)[1],i=F.filter(function(e){return e.el.input.name==="".concat(o).concat(n,"cost")}),c=_slicedToArray(i,1)[0],l=F.filter(function(e){return e.el.input.name==="".concat(o).concat(n,"initial-payment")}),s=_slicedToArray(l,1)[0],u=F.filter(function(e){return e.el.input.name==="".concat(o).concat(n,"period")}),d=_slicedToArray(u,1)[0],m=x&&x.name,f=F.filter(function(e){return e.el.input.name==="".concat(m,"-purpose")}),v=_slicedToArray(f,1)[0],p=x&&x.querySelector('[for="credit-registration-cost"]'),y=F.filter(function(e){return e.el.input.name==="".concat(m,"-cost")}),b=_slicedToArray(y,1)[0],g=F.filter(function(e){return e.el.input.name==="".concat(m,"-initial-payment")}),_=_slicedToArray(g,1)[0],h=x&&x.querySelector('input[name="'.concat(m,'-initial-payment"]')).closest(".calculator__form-field"),k=F.filter(function(e){return e.el.input.name==="".concat(m,"-period")}),L=_slicedToArray(k,1)[0];switch(o){case"mortgage":v.value="Ипотека",c&&(p.textContent="Стоимость недвижимости");break;case"auto":v.value="Автокредит",c&&(p.textContent="Стоимость автомобиля");break;case"personal":v.value="Потребительский кредит",c&&(p.textContent="Сумма кредита");break;default:throw new Error("Unknown modifier: ".concat(o))}c&&(b.value=c.unmaskedValue,a(b)),s?(_.value=s.unmaskedValue,h.classList.remove("calculator__form-field--invisible"),a(_)):h.classList.add("calculator__form-field--invisible"),d&&(L.value=d.unmaskedValue,a(L))};if(c&&c.forEach(function(e){e.addEventListener("change",_),e.addEventListener("change",U)}),x){var $=x.name,X=F.filter(function(e){return e.el.input.name==="".concat($,"-full-name")}),Y=_slicedToArray(X,1)[0],G=F.filter(function(e){return e.el.input.name==="".concat($,"-tel")}),K=_slicedToArray(G,1)[0],Q=F.filter(function(e){return e.el.input.name==="".concat($,"-email")}),ee=_slicedToArray(Q,1)[0],te=function(e,t){var a=e.parentElement,n=_slicedToArray(a.classList,1)[0];"valid"===t?a&&a.classList.contains("".concat(n,"--invalid"))&&(a.classList.remove("".concat(n,"--invalid")),a.classList.remove("animated","shake")):"invalid"===t&&a&&!a.classList.contains("".concat(n,"--invalid"))&&(a.classList.add("".concat(n,"--invalid")),a.classList.add("animated","shake"))},ae=function(e){var t=e.target;t.validity.valid||te(t,"invalid")},ne=function(e){var t=e.target;te(t,"valid")};[Y,ee,K].forEach(function(e){e.el.input.addEventListener("invalid",ae),e.el.input.addEventListener("input",ne)});x.addEventListener("submit",function(e){e.preventDefault();var t=e.target;te(t,"valid");var a=document.querySelector(".modal--calculator"),n=F.filter(function(e){return e.el.input.name==="".concat($,"-application-number")}),r=_slicedToArray(n,1)[0],o=Object.fromEntries(new FormData(t));localStorage.setItem("registrationFormData",JSON.stringify({fullName:o["".concat($,"-full-name")],email:o["".concat($,"-email")],tel:o["".concat($,"-tel")]})),r&&(r.unmaskedValue="".concat(Number(r.unmaskedValue)+1)),x.hidden=!0,a.classList.contains("modal--invisible")&&(a.classList.remove("modal--invisible","fadeOut"),a.classList.add("animated","fadeIn"));var i=window.innerWidth-document.documentElement.clientWidth;document.body.classList.add("page--overlay","page--no-scroll"),document.body.style.cssText="background-color: #f6f7ff; padding-right: ".concat(i,"px;"),c&&c.forEach(function(e){e.hidden||(e.hidden=!e.hidden)}),P&&(P.hidden=!0)})}}),document.addEventListener("DOMContentLoaded",function(){var n,a,r=document.querySelector("#map"),o=function(){var t=r&&JSON.parse(r.dataset.departments);n=new ymaps.Map(r,{center:[61.698653,99.505405],zoom:[9],controls:[]},{autoFitToViewport:"always"}),(a=new ymaps.ObjectManager({clusterize:!0,gridSize:32,clusterDisableClickZoom:!0})).objects.options.set({iconLayout:"default#image",iconImageHref:"./static/departments/map_marker.svg",iconImageSize:[35,40],iconImageOffset:[-17,-20]}),fetch("./static/departments/departments.json").then(function(e){return e.json()}).then(function(e){a.add(e.features=e.features.filter(function(e){return t.includes(e.group)})),n.geoObjects.add(a),a.getBounds()&&n.setBounds(a.getBounds())}),n.behaviors.disable("scrollZoom")};document.querySelector("#departments-form").addEventListener("change",function(e){var t=e.currentTarget,a=Array.from(t.elements.department).map(function(e){if(e.checked){var t=e.id.split("-");return _slicedToArray(t,2)[1]}return!1}).filter(function(e){return e});r&&(r.dataset.departments=JSON.stringify(a)),n&&n.destroy(),ymaps.ready(o)}),window.addEventListener("resize",function(){n&&a&&(n.setBounds(a.getBounds()),n.container.fitToViewport())}),ymaps.ready(o)}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("form#departments-form label").forEach(function(e){e.addEventListener("keydown",function(e){var t=e.keyCode,a=e.target;13!==t&&32!==t||a.click()})})});var _WatchJS=WatchJS,watch=_WatchJS.watch;document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("#modal-page-header"),e=document.querySelectorAll(".modal__trigger"),a=t.querySelector("form"),c={login:a.querySelector(".login-modal-form-field input"),password:a.querySelector(".password-modal-form-field input")},n=a.querySelector('button[type="submit"]'),r={empty:"Обязательно к заполнению"},o={empty:"Обязательно к заполнению",length:"Минимальная длина пароля — 6 символов"},l=function(e,t){var a=function(e,t){var a={};switch(t){case"login":e.login?a.login="":a.login=r.empty;break;case"password":e.password?e.password.length<6?a.password=o.length:a.password="":a.password=o.empty;break;default:throw new Error("Unknown field's name: ".concat(t))}return _objectSpread({},u.form.errors,a)}(e.form.fields,t);e.form.errors=a},s=function(t){u.form.valid=Object.keys(t).every(function(e){return 0===t[e].length})},i=localStorage.getItem("loginFormData")?JSON.parse(localStorage.getItem("loginFormData")):{login:"",password:""},u={form:{processState:"filling",fields:{login:i.login,password:i.password},valid:!0,errors:{login:"",password:""}}};if(t&&a){c.login&&c.password&&(Object.entries(c).forEach(function(e){var t=_slicedToArray(e,2),a=t[0],n=t[1];n.value=u.form.fields[a],n.addEventListener("input",function(e){u.form.fields[a]=e.target.value,l(u,a),s(u.form.errors)})}),watch(u.form,"errors",function(){Object.entries(c).forEach(function(e){var t=_slicedToArray(e,2),a=t[0],n=t[1],r="".concat(a,"-modal-form-field"),o=n.closest(".".concat(r));if(o){var i=o.querySelector(".".concat(r,"__feedback")),c=u.form.errors[a];if(i.querySelector(".".concat(r,"__error-message"))&&(o.classList.remove("".concat(r,"--invalid")),i.innerHTML=""),!c)return;var l=document.createElement("span");l.classList.add("".concat(r,"__error-message")),l.innerHTML=c,i.append(l),o.classList.add("".concat(r,"--invalid"))}})})),n&&(watch(u.form,"processState",function(){var e=u.form.processState;switch(e){case"filling":case"sending":n.disabled=!0;break;case"finished":t.classList.add("modal--invisible","fadeOut"),t.classList.remove("fadeIn"),document.body.style.cssText="background-color: '', padding-right: '';",document.body.classList.remove("page--overlay","page--no-scroll");break;default:throw new Error("Unknown state: ".concat(e))}}),watch(u.form,"valid",function(){n.disabled=!u.form.valid})),a.addEventListener("submit",function(e){e.preventDefault();var t=e.target;u.form.processState="sending";var a=new FormData(t);if(localStorage.setItem("loginFormData",JSON.stringify(Object.fromEntries(a))),Object.entries(c).forEach(function(e){var t=_slicedToArray(e,1)[0];l(u,t)}),s(u.form.errors),u.form.valid)u.form.processState="finished";else{var n=u.form.errors;u.form.processState="filling";for(var r=Object.keys(n),o=0;o<r.length;o++){var i=r[o];if(0!==n[i]){c[i].focus();break}}}});var d=function(e){var t=e.target,a=e.type,n=t.previousElementSibling;"mousedown"===a?n.setAttribute("type","text"):("keydown"===a&&13===e.keyCode||"keydown"===a&&32===e.keyCode)&&n.setAttribute("type","text")},m=function(e){e.target.previousElementSibling.setAttribute("type","password")};["mousedown","keydown"].forEach(function(e){c.password.nextElementSibling.addEventListener(e,d)}),["mouseup","keyup"].forEach(function(e){return c.password.nextElementSibling.addEventListener(e,m)});var f=function(e){e.classList.add("modal--invisible","fadeOut"),e.classList.remove("fadeIn"),document.body.classList.contains("page--overlay")&&document.body.classList.remove("page--overlay","page--no-scroll"),document.body.style.cssText="background-color: ''; padding-right: '';"};e&&["click","keydown"].forEach(function(t){return e.forEach(function(e){return e.addEventListener(t,function(e){var t=e.type,a=e.target;"keydown"===t?32!==e.keyCode&&13!==e.keyCode||f(a.closest("#".concat(a.dataset.modal))):"click"===t&&f(a.closest("#".concat(a.dataset.modal)))})})})}});
//# sourceMappingURL=app.min.js.map