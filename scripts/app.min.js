var helpers={modal:{hide:function(e){e.classList.add("modal--invisible","fadeOut"),e.classList.remove("fadeIn")},show:function(e){e.classList.remove("modal--invisible","fadeOut"),e.classList.add("fadeIn")}},scroll:{disable:function(){document.body.classList.add("page--no-scroll"),document.body.classList.remove("page--transparent"),document.body.style.paddingRight="".concat(helpers.getScrollbarWidth(),"px")},enable:function(){document.body.classList.remove("page--no-scroll"),document.body.classList.add("page--transparent"),document.body.style.paddingRight=""}},hideModal:function(e){e.classList.contains("modal--invisible")||(e.classList.add("modal--invisible","fadeOut"),e.classList.remove("fadeIn")),document.body.classList.remove("page--no-scroll"),document.body.classList.add("page--transparent"),document.body.style.paddingRight=""},num2str:function(e,t){var n=(e=Math.abs(e)%100)%10;return 10<e&&e<20?t[2]:1<n&&n<5?t[1]:1===n?t[0]:t[2]},getPercentage:function(e,t){return 100*e/t},round:function(e,t){return e%t==0?Math.floor(e/t)*t:Math.floor(e/t)*t+t},getScrollbarWidth:function(){return window.innerWidth-document.documentElement.clientWidth}};function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}document.addEventListener("DOMContentLoaded",function(){new SmoothScroll('a[href*="#"]',{speed:1e3,speedAsDuration:!0});document.body.classList.remove("page_no_js"),document.body.classList.add("page_js");var t=document.querySelectorAll(".modal");document.addEventListener("keydown",function(e){27===e.keyCode&&t&&t.forEach(function(e){e.classList.contains("modal--invisible")||(helpers.modal.hide(e),helpers.scroll.enable())})})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".main-nav__trigger"),n=function(e,t){var n=t.closest(".main-nav").querySelector(".main-nav-list");switch(e){case"close":t.classList.remove("main-nav__trigger--open-menu"),t.classList.add("main-nav__trigger--close-menu"),t.setAttribute("aria-label","Close menu"),t.querySelector("use").setAttribute("xlink:href","#main-nav__close"),n&&(n.classList.remove("main-nav-list--hidden","fadeOut"),n.classList.add("animated","fadeIn"));break;case"open":t.classList.remove("main-nav__trigger--close-menu"),t.classList.add("main-nav__trigger--open-menu"),t.setAttribute("aria-label","Open menu"),t.querySelector("use").setAttribute("xlink:href","#main-nav__menu"),n&&(n.classList.add("main-nav-list--hidden","fadeOut"),n.classList.remove("main-nav-list--hidden","fadeIn"));break;default:throw new Error("Unknown state: ".concat(e))}};e&&e.addEventListener("click",function(e){var t=e.currentTarget;t.classList.contains("main-nav__trigger--open-menu")?n("close",t):t.classList.contains("main-nav__trigger--close-menu")&&n("open",t)})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#page-header-login");e&&e.addEventListener("click",function(e){var t=e.target,n=document.querySelector("#".concat(t.dataset.modal," form")),a=null,r=null;n&&(a=n.querySelector('[type="submit"]'),r=n.elements.login);var o=document.getElementById(t.dataset.modal);o&&(helpers.modal.show(o),helpers.scroll.disable()),localStorage.getItem("loginFormData")?a&&a.focus():r&&r.focus()})}),document.addEventListener("DOMContentLoaded",function(){new Swiper(".about",{loop:!0,speed:500,spaceBetween:10,noSwiping:!1,pagination:{el:".swiper-pagination",type:"bullets",clickable:"false"},breakpoints:{1024:{noSwiping:!0,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},autoplay:{delay:4e3}}}})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("#services .services__list-item"),t=document.querySelectorAll("#services .services__link"),r=document.querySelectorAll("#services .tab-services");if(t&&r){["click","keyup"].forEach(function(e){t.forEach(function(i,c){i.addEventListener(e,function(e){return n=i,a=c,r=(t=e).type,o=t.keyCode,void("click"===r?(t.preventDefault(),l(),s(n,a)):"keyup"===r&&9===o&&(l(),s(n,a)));var t,n,a,r,o})})});var l=function(){t.forEach(function(e){e.closest(".services__list-item").classList.remove("services__list-item--active")}),r.forEach(function(e){e.classList.remove("tab-services--active")})},s=function(e,n){e.closest(".services__list-item").classList.add("services__list-item--active");var a=Array.from(r).findIndex(function(e,t){return t===n});r.forEach(function(e,t){t===a&&e.classList.add("tab-services--active")})}}var n=window.matchMedia("only screen and (max-width: 1023px)"),a=null,o=function(e,t){e.forEach(function(e){return e.classList.contains("".concat(t))?e.classList.remove("".concat(t)):e})},i=function(e,n){e.forEach(function(e,t){return 0===t?e.classList.add("".concat(n)):e.classList.remove("".concat(n))})},c=function(){n.matches?(a=new Swiper("#services",{loop:!0,speed:500,spaceBetween:10,autoplay:{delay:3e3},pagination:{el:".swiper-pagination",type:"bullets",clickable:"false"}}),r&&e&&(o(r,"tab-service--active"),o(e,"services__list-item--active"))):a&&(a.destroy(),r&&e&&(i(r,"tab-service--active"),i(e,"services__list-item--active")))};c(),n.addListener(c)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#calculator"),t=null,n=null,a=null,i=null,P=null,C=null,r=null,l=null,s=null;if(e&&((t=e.querySelector("#credit-selection"))&&(n=t.querySelector("input"),a=t.querySelector(".calculator__form-field")),i=e.querySelectorAll(".calculator__credit-form--calculation form"),P=e.querySelector("#credit-offer"),C=e.querySelector("#credit-registration"),r=e.querySelectorAll(".calculator__message"))){var o=Array.from(r).filter(function(e){return!!e.classList.contains("calculator__message--reject")&&e}),c=_slicedToArray(o,1);l=c[0];var u=Array.from(r).filter(function(e){return!!e.classList.contains("calculator__message--error")&&e}),d=_slicedToArray(u,1);s=d[0]}var m=function(e,t,n){e.addEventListener("focus",function(){t.classList.contains("".concat(n,"--focus"))||t.classList.add("".concat(n,"--focus"))}),e.addEventListener("blur",function(){t.classList.contains("".concat(n,"--focus"))&&t.classList.remove("".concat(n,"--focus"))})},f=function(e){e.addEventListener("keydown",function(e){var t=e.keyCode,n=e.target;13!==t&&32!==t||n.click()})},x=function(e,t){switch(e){case"currency":e=" ".concat(helpers.num2str(Number(t),v));break;case"percent":e="%";break;case"numero-sign":e="№";break;case"period":e=" ".concat(helpers.num2str(Number(t),p));break;case"empty":e="";break;default:throw new Error("Unknown unit: ".concat(e))}return e},M=function(e,t){switch(t){case"integer":return{mask:"VALUE".concat(e),lazy:!1,blocks:{VALUE:{mask:Number,scale:0,signed:!1,thousandsSeparator:" "}}};case"4-digit integer":return{mask:"".concat(e," VALUE"),blocks:{VALUE:{mask:/^\d+$/,commit:function(e,t){return t._value=e.padStart(4,"0")}}}};case"fractional":return{mask:"VALUE".concat(e),lazy:!1,blocks:{VALUE:{mask:Number,scale:2,signed:!1,padFractionalZeros:!0,radix:","}}};case"string":return{mask:"VALUE",blocks:{VALUE:{mask:String}}};case"tel":return{mask:"+{7}(000)000-00-00",lazy:!0};case"full-name":return{mask:/^[a-zA-Zа-яА-ЯёЁ ]+$/};case"email":return{mask:/^\S*@?\S*$/};default:throw new Error("Unknown mask's format: ".concat(t))}},v=["рубль","рубля","рублей"],p=["год","года","лет"];if(a&&a.addEventListener("click",function(e){event.stopPropagation();var n=e.currentTarget;n.classList.toggle("calculator__form-field--open"),document.addEventListener("click",function(e){e.stopImmediatePropagation();var t=n.getBoundingClientRect();t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width||n.classList.contains("calculator__form-field--open")&&n.classList.remove("calculator__form-field--open")})}),t){var y=e&&e.querySelectorAll(".calculator__col");t.querySelectorAll(".calculator__forms-list-item").forEach(function(e){e.addEventListener("click",function(e){var t=e.target;i&&i.forEach(function(e){e.name!==t.dataset.creditType?e.hidden=!0:(e.hidden=!1,y.forEach(function(e){e.classList.contains("calculator__col--right")&&e.classList.contains("calculator__col--invisible")&&e.classList.remove("calculator__col--invisible")}),e.dispatchEvent(new Event("change")))}),C&&(C.hidden=!0),n&&(n.value=t.textContent,n.parentElement.classList.remove("calculator__form-field--open"))}),m(e,e.parentElement.previousElementSibling,"calculator__form-field"),f(e)})}var R=[];i&&i.forEach(function(e){var t=e.querySelectorAll('input[type="text"], input[type="range"]'),n=e.querySelectorAll("button");t&&t.forEach(function(e){var t=x(e.dataset.unit,e.value);R.push(IMask(e,M(t,e.dataset.format)))}),n&&n.forEach(function(e){e.addEventListener("click",function(e){var t=e.target,n=t.closest(".calculator__form-field"),a=t.name,r=R.find(function(e){return e.el.input.id===n.querySelector("input").id}),o=r.el.input.dataset,i=o.min,c=void 0===i?"":i,l=o.max,s=void 0===l?"":l,u=o.step,d=void 0===u?"":u,m=o.unit,f=void 0===m?"":m,v=o.format,p=void 0===v?"":v;if(Number.isNaN(Number(r.unmaskedValue))){var y=x(f,r.unmaskedValue);r.updateOptions(M(y,p)),r.value="".concat(Number(c)),r.el.input.dispatchEvent(new Event("change",{bubbles:!0})),n&&n.classList.contains("calculator__form-field--invalid")&&n.classList.remove("calculator__form-field--invalid")}else{var b=0;"plus"===a?(b=Number(r.unmaskedValue)+Number(d))>Number(s)&&(b="".concat(Number(s))):"minus"===a&&(b=Number(r.unmaskedValue)-Number(d))<Number(c)&&(b="".concat(Number(c))),r.value="".concat(b),r.el.input.dispatchEvent(new Event("change",{bubbles:!0}))}})}),e.querySelectorAll(".calculator__form-field > button, .calculator__form-field > input").forEach(function(e){m(e,e.parentElement,"calculator__form-field")}),e.querySelectorAll("label").forEach(function(e){return f(e)})}),R.forEach(function(q){var t=q.el.input,O=t.closest(".calculator__form-field"),I=null;O&&(I=O.querySelectorAll("button"));t.addEventListener("input",function(){var e=x(t.dataset.unit,q.unmaskedValue);q.updateOptions(M(e,t.dataset.format))}),t.addEventListener("change",function(e){var t=e.target,n=t.dataset,a=n.min,r=void 0===a?"":a,o=n.max,i=void 0===o?"":o,c=n.step,l=void 0===c?"":c,s=n.unit,u=void 0===s?"":s,d=n.format,m=void 0===d?"":d,f="-credit-",v=t.name.split("".concat(f)),p=_slicedToArray(v,2),y=p[0],b=p[1],g=R.filter(function(e){return e.el.input.name==="".concat(y).concat(f,"cost")}),h=_slicedToArray(g,1)[0],_=R.filter(function(e){return e.el.input.name==="".concat(y).concat(f,"initial-payment")}),k=_slicedToArray(_,1)[0],L=R.filter(function(e){return e.el.input.name==="".concat(y).concat(f,"initial-payment-range")}),w=_slicedToArray(L,1)[0],E=document.querySelector("#".concat(y).concat(f,"initial-payment-percent")),S=R.filter(function(e){return e.el.input.name==="".concat(y).concat(f,"period")}),A=_slicedToArray(S,1)[0],N=R.filter(function(e){return e.el.input.name==="".concat(y).concat(f,"period-range")}),T=_slicedToArray(N,1)[0],V="";switch(b){case"cost":Number(q.unmaskedValue)<Number(r)||Number(q.unmaskedValue)>Number(i)?(q.updateOptions(M("","string")),q.value="Некорректное значение",k&&(k.value="0"),O&&!O.classList.contains("calculator__form-field--invalid")&&O.classList.add("calculator__form-field--invalid"),k&&w&&[k,w].forEach(function(e){e.value="0",e.el.input.disabled=!0})):(k&&(k.value="".concat(Number(h.unmaskedValue)*(Number(k.el.input.dataset.min)/100)),w&&(w.value="".concat(Number(w.el.input.min)))),I&&I.forEach(function(e){return e.disabled=!1}),k&&w&&[k,w].forEach(function(e){return e.el.input.disabled=!1}));break;case"initial-payment":Number(q.unmaskedValue)>=Number(h.unmaskedValue)?(q.value="".concat(Number(h.unmaskedValue)),w&&(w.value="".concat(i))):helpers.getPercentage(Number(q.unmaskedValue),h.unmaskedValue)<Number(r)&&(q.value="".concat(Number(h.unmaskedValue)/Number(r)),w&&(w.value="".concat(r))),w&&(w.value="".concat(helpers.round(helpers.getPercentage(Number(q.unmaskedValue),Number(h.unmaskedValue)),Number(l)))),V=x(u,q.unmaskedValue),q.updateOptions(M(V,m));break;case"initial-payment-range":k&&(k.value="".concat(Number(h.unmaskedValue)*(Number(q.unmaskedValue)/100)),k.el.input.dispatchEvent(new Event("change",{bubbles:!0})),E&&(E.textContent="".concat(Number(q.unmaskedValue),"%")));break;case"period":Number(q.unmaskedValue)>Number(i)?(q.value="".concat(Number(i)),q.updateOptions(M(q,m)),T&&(T.value="".concat(i))):Number(q.unmaskedValue)<Number(r)&&(q.value="".concat(Number(r)),q.updateOptions(M(u,m)),T&&(T.value="".concat(r))),T&&(T.value="".concat(helpers.round(Number(q.unmaskedValue),Number(l)))),V=x(u,q.unmaskedValue),q.updateOptions(M(V,m));break;case"period-range":A&&(A.value="".concat(Number(q.unmaskedValue)),A.el.input.dispatchEvent(new Event("change",{bubbles:!0})));break;default:throw new Error("Unknown field's modifier: ".concat(b))}C&&(C.hidden||(C.hidden=!0))}),t.addEventListener("focus",function(){O&&O.classList.contains("calculator__form-field--invalid")&&O.classList.remove("calculator__form-field--invalid")})});var W=function(e,t,n){return Math.ceil(e*(t/(1-Math.pow(1+t,-1*Math.abs(n)))))},F=function(e){return Math.ceil(e/45*100)},z=function(e){return Number((e/100/12).toFixed(5))},B=function(e,t,n){var a=new Map([["mortgage","ипотечные"],["auto","автомобильные"],["personal","потребительские"]]);if(t<n){var r=l.querySelectorAll("span"),o=_slicedToArray(r,2),i=o[0],c=o[1];i.textContent=a.get("".concat(e)),c.textContent="".concat(n.toLocaleString("en-US").replace(/,/g," ")," ").concat(helpers.num2str(n,v)),l.classList.remove("calculator__message--invisible"),P.hidden=!0}else l.classList.add("calculator__message--invisible"),P.hidden=!1;Number.isNaN(t)?(s.classList.remove("calculator__message--invisible"),P.hidden=!0):s.classList.add("calculator__message--invisible")},H=new Map([["mortgage","Сумма ипотеки"],["auto","Сумма автокредита"],["period","Сумма кредита"]]);if(P){var b=P.querySelectorAll("input");b&&b.forEach(function(e){var t=x(e.dataset.unit,e.value);R.push(IMask(e,M(t,e.dataset.format)))}),P.querySelector("button").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),C.hidden=!1})}var J=function(e,t){var c=t.creditSum,l=t.interestRate,s=t.annuityPayment,u=t.requiredIncome;e.forEach(function(e){var t=e.el.input.dataset,n=t.unit,a=t.format,r=e.el.input.name,o=r.split("".concat("-offer-")),i="";switch(_slicedToArray(o,2)[1]){case"credit-sum":e.value="".concat(c),i=x(n,e.unmaskedValue),e.updateOptions(M(i,a));break;case"interest-rate":e.value="".concat(l),i=x(n,e.unmaskedValue),e.updateOptions(M(i,a));break;case"annuity-payment":e.value="".concat(s),i=x(n,e.unmaskedValue),e.updateOptions(M(i,a));break;case"required-income":e.value="".concat(u),i=x(n,e.unmaskedValue),e.updateOptions(M(i,a));break;default:throw new Error("Unknown field's name: ".concat(r))}})},g=function(e){var t=e.currentTarget,n="-credit-",a=t.name.split("-"),r=_slicedToArray(a,2)[1],o=R.filter(function(e){return e.el.input.name==="".concat(r).concat(n,"cost")}),i=_slicedToArray(o,1)[0],c=R.filter(function(e){return e.el.input.name==="".concat(r).concat(n,"initial-payment")}),l=_slicedToArray(c,1)[0],s=R.filter(function(e){return e.el.input.name==="".concat(r).concat(n,"period")}),u=_slicedToArray(s,1)[0];P&&(P.querySelector('label[for="credit-offer-credit-sum"]').textContent=H.get("".concat(r)));var d=12*Number(u.unmaskedValue),m=Array.from(R).filter(function(e){return e.el.input.name.includes("offer")});if(i&&u)switch(r){case"mortgage":var f=Array.from(t.elements).filter(function(e){return e.name==="".concat(r).concat(n,"maternity-capital")}),v=_slicedToArray(f,1)[0];if(l&&v){var p=v.checked?47e4:0,y=Number(i.unmaskedValue)-Number(l.unmaskedValue)-p,b=helpers.getPercentage(Number(l.unmaskedValue),Number(i.unmaskedValue)),g=0;b<15?g=9.4:15<=b&&(g=8.5);var h=z(g),_=W(y,h,d),k=F(_);B(r,y,5e5),J(m,{creditSum:y,interestRate:g,annuityPayment:_,requiredIncome:k})}break;case"auto":var L=Array.from(t.elements).filter(function(e){return e.name==="".concat(r).concat(n,"car-insurance")}),w=_slicedToArray(L,1)[0],E=Array.from(t.elements).filter(function(e){return e.name==="".concat(r).concat(n,"life-insurance")}),S=_slicedToArray(E,1)[0];if(l&&w&&S){var A=Number(i.unmaskedValue)-Number(l.unmaskedValue),N=0;Number(i.unmaskedValue)<2e6?N=16:2e6<Number(i.unmaskedValue)&&(N=15),(w.checked||S.checked)&&(N=8.5),w.checked&&S.checked&&(N=3.5);var T=z(N),V=W(A,T,d),q=F(V);B(r,A,2e5),J(m,{creditSum:A,interestRate:N,annuityPayment:V,requiredIncome:q})}break;case"personal":var O=Array.from(t.elements).filter(function(e){return e.name==="".concat(r).concat(n,"project-member")}),I=_slicedToArray(O,1)[0];if(I){var C=Number(i.unmaskedValue),x=I.checked?.5:0,M=0;Number(i.unmaskedValue)<75e4?M=15-x:Number(i.unmaskedValue)<=75e4&&Number(i.unmaskedValue)<2e6?M=12.5-x:2e6<Number(i.unmaskedValue)&&(M=9.5-x);var D=z(M),j=W(C,D,d),U=F(j);B(r,C,0),J(m,{creditSum:C,interestRate:M,annuityPayment:j,requiredIncome:U})}break;default:throw new Error("Unknown form's modifier: ".concat(r))}};if(C){var h=C.name,_=C.querySelectorAll("input");_&&_.forEach(function(e){var t=x(e.dataset.unit,e.value);R.push(IMask(e,M(t,e.dataset.format)))});var k=R.filter(function(e){return e.el.input.name==="".concat(h,"-full-name")}),L=_slicedToArray(k,1)[0],w=R.filter(function(e){return e.el.input.name==="".concat(h,"-email")}),E=_slicedToArray(w,1)[0],S=R.filter(function(e){return e.el.input.name==="".concat(h,"-tel")}),A=_slicedToArray(S,1)[0],N=R.filter(function(e){return e.el.input.name==="".concat(h,"-application-number")}),T=_slicedToArray(N,1)[0],V=localStorage.getItem("registrationFormData")?JSON.parse(localStorage.getItem("registrationFormData")):{fullName:"",tel:"",email:""},q=V.fullName,O=V.tel,I=V.email;L&&(L.value=q),E&&(E.value=I),A&&(A.value=O),T&&(T.value="1")}var D=function(e){var t=e.currentTarget,n=function(e){var t=e.el.input.dataset,n=t.unit,a=t.format,r=x(n,e.unmaskedValue);e.updateOptions(M(r,a))},a="-credit-",r=t.name.split("-"),o=_slicedToArray(r,2)[1],i=R.filter(function(e){return e.el.input.name==="".concat(o).concat(a,"cost")}),c=_slicedToArray(i,1)[0],l=R.filter(function(e){return e.el.input.name==="".concat(o).concat(a,"initial-payment")}),s=_slicedToArray(l,1)[0],u=R.filter(function(e){return e.el.input.name==="".concat(o).concat(a,"period")}),d=_slicedToArray(u,1)[0],m=C&&C.name,f=R.filter(function(e){return e.el.input.name==="".concat(m,"-purpose")}),v=_slicedToArray(f,1)[0],p=C&&C.querySelector('[for="credit-registration-cost"]'),y=R.filter(function(e){return e.el.input.name==="".concat(m,"-cost")}),b=_slicedToArray(y,1)[0],g=R.filter(function(e){return e.el.input.name==="".concat(m,"-initial-payment")}),h=_slicedToArray(g,1)[0],_=C&&C.querySelector('input[name="'.concat(m,'-initial-payment"]')).closest(".calculator__form-field"),k=R.filter(function(e){return e.el.input.name==="".concat(m,"-period")}),L=_slicedToArray(k,1)[0];switch(o){case"mortgage":v.value="Ипотека",c&&(p.textContent="Стоимость недвижимости");break;case"auto":v.value="Автокредит",c&&(p.textContent="Стоимость автомобиля");break;case"personal":v.value="Потребительский кредит",c&&(p.textContent="Сумма кредита");break;default:throw new Error("Unknown modifier: ".concat(o))}c&&(b.value=c.unmaskedValue,n(b)),s?(h.value=s.unmaskedValue,_.classList.remove("calculator__form-field--invisible"),n(h)):_.classList.add("calculator__form-field--invisible"),d&&(L.value=d.unmaskedValue,n(L))};if(i&&i.forEach(function(e){e.addEventListener("change",g),e.addEventListener("change",D)}),C){var j=C.name,U=R.filter(function(e){return e.el.input.name==="".concat(j,"-full-name")}),Z=_slicedToArray(U,1)[0],$=R.filter(function(e){return e.el.input.name==="".concat(j,"-tel")}),X=_slicedToArray($,1)[0],Y=R.filter(function(e){return e.el.input.name==="".concat(j,"-email")}),G=_slicedToArray(Y,1)[0],K=function(e,t){var n=e.parentElement,a=_slicedToArray(n.classList,1)[0];"valid"===t?n&&n.classList.contains("".concat(a,"--invalid"))&&(n.classList.remove("".concat(a,"--invalid")),n.classList.remove("animated","shake")):"invalid"===t&&n&&!n.classList.contains("".concat(a,"--invalid"))&&(n.classList.add("".concat(a,"--invalid")),n.classList.add("animated","shake"))},Q=function(e){var t=e.target;t.validity.valid||K(t,"invalid")},ee=function(e){var t=e.target;K(t,"valid")};[Z,G,X].forEach(function(e){e.el.input.addEventListener("invalid",Q),e.el.input.addEventListener("input",ee)});C.addEventListener("submit",function(e){e.preventDefault();var t=e.target;K(t,"valid");var n=document.querySelector(".modal--calculator"),a=R.filter(function(e){return e.el.input.name==="".concat(j,"-application-number")}),r=_slicedToArray(a,1)[0],o=Object.fromEntries(new FormData(t));localStorage.setItem("registrationFormData",JSON.stringify({fullName:o["".concat(j,"-full-name")],email:o["".concat(j,"-email")],tel:o["".concat(j,"-tel")]})),r&&(r.unmaskedValue="".concat(Number(r.unmaskedValue)+1)),C.hidden=!0,n&&(helpers.modal.show(n),helpers.scroll.disable()),i&&i.forEach(function(e){e.hidden||(e.hidden=!e.hidden)}),P&&(P.hidden=!0)})}}),document.addEventListener("DOMContentLoaded",function(){var a,n,r=document.querySelector("#map"),o=function(){var t=r&&JSON.parse(r.dataset.departments);a=new ymaps.Map(r,{center:[61.698653,99.505405],zoom:[9],controls:[]},{autoFitToViewport:"always"}),(n=new ymaps.ObjectManager({clusterize:!0,gridSize:32,clusterDisableClickZoom:!0})).objects.options.set({iconLayout:"default#image",iconImageHref:"./static/departments/map_marker.svg",iconImageSize:[35,40],iconImageOffset:[-17,-20]}),fetch("./static/departments/departments.json").then(function(e){return e.json()}).then(function(e){n.add(e.features=e.features.filter(function(e){return t.includes(e.group)})),a.geoObjects.add(n),n.getBounds()&&a.setBounds(n.getBounds())}),a.behaviors.disable("scrollZoom")};document.querySelector("#departments-form").addEventListener("change",function(e){var t=e.currentTarget,n=Array.from(t.elements.department).map(function(e){if(e.checked){var t=e.id.split("-");return _slicedToArray(t,2)[1]}return!1}).filter(function(e){return e});r&&(r.dataset.departments=JSON.stringify(n)),a&&a.destroy(),ymaps.ready(o)}),window.addEventListener("resize",function(){a&&n&&(a.setBounds(n.getBounds()),a.container.fitToViewport())}),ymaps.ready(o)}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("form#departments-form label").forEach(function(e){e.addEventListener("keydown",function(e){var t=e.keyCode,n=e.target;13!==t&&32!==t||n.click()})})});var _WatchJS=WatchJS,watch=_WatchJS.watch;document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("#modal-page-header"),e=t.querySelector("form"),c={login:e.querySelector(".login-modal-form-field input"),password:e.querySelector(".password-modal-form-field input")},n=e.querySelector('button[type="submit"]'),a={empty:"Обязательно к заполнению"},r={empty:"Обязательно к заполнению",length:"Минимальная длина пароля — 6 символов"},l=function(e,t){var n=function(e,t){var n={};switch(t){case"login":e.login?n.login="":n.login=a.empty;break;case"password":e.password?e.password.length<6?n.password=r.length:n.password="":n.password=r.empty;break;default:throw new Error("Unknown field's name: ".concat(t))}return _objectSpread({},u.form.errors,n)}(e.form.fields,t);e.form.errors=n},s=function(t){u.form.valid=Object.keys(t).every(function(e){return 0===t[e].length})},o=localStorage.getItem("loginFormData")?JSON.parse(localStorage.getItem("loginFormData")):{login:"",password:""},u={form:{processState:"filling",fields:{login:o.login,password:o.password},valid:!0,errors:{login:"",password:""}}};if(t&&e){c.login&&c.password&&(Object.entries(c).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],a=t[1];a.value=u.form.fields[n],a.addEventListener("input",function(e){u.form.fields[n]=e.target.value,l(u,n),s(u.form.errors)})}),watch(u.form,"errors",function(){Object.entries(c).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],a=t[1],r="".concat(n,"-modal-form-field"),o=a.closest(".".concat(r));if(o){var i=o.querySelector(".".concat(r,"__feedback")),c=u.form.errors[n];if(i.querySelector(".".concat(r,"__error-message"))&&(o.classList.remove("".concat(r,"--invalid")),i.innerHTML=""),!c)return;var l=document.createElement("span");l.classList.add("".concat(r,"__error-message")),l.innerHTML=c,i.append(l),o.classList.add("".concat(r,"--invalid"))}})})),n&&(watch(u.form,"processState",function(){var e=u.form.processState;switch(e){case"filling":case"sending":n.disabled=!0;break;case"finished":t.classList.add("modal--invisible","fadeOut"),t.classList.remove("fadeIn"),document.body.style.cssText="background-color: '', padding-right: '';",document.body.classList.remove("page--overlay","page--no-scroll");break;default:throw new Error("Unknown state: ".concat(e))}}),watch(u.form,"valid",function(){n.disabled=!u.form.valid})),e.addEventListener("submit",function(e){e.preventDefault();var t=e.target;u.form.processState="sending";var n=new FormData(t);if(localStorage.setItem("loginFormData",JSON.stringify(Object.fromEntries(n))),Object.entries(c).forEach(function(e){var t=_slicedToArray(e,1)[0];l(u,t)}),s(u.form.errors),u.form.valid)u.form.processState="finished";else{var a=u.form.errors;u.form.processState="filling";for(var r=Object.keys(a),o=0;o<r.length;o++){var i=r[o];if(0!==a[i]){c[i].focus();break}}}});var i=function(e){var t=e.target,n=e.type,a=t.previousElementSibling;"mousedown"===n?a.setAttribute("type","text"):("keydown"===n&&13===e.keyCode||"keydown"===n&&32===e.keyCode)&&a.setAttribute("type","text")},d=function(e){e.target.previousElementSibling.setAttribute("type","password")};["mousedown","keydown"].forEach(function(e){c.password.nextElementSibling.addEventListener(e,i)}),["mouseup","keyup"].forEach(function(e){return c.password.nextElementSibling.addEventListener(e,d)});var m=document.querySelectorAll(".modal__trigger"),f=document.querySelectorAll(".modal__overlay");m&&["click","keydown"].forEach(function(t){return m.forEach(function(e){return e.addEventListener(t,function(e){var t=e.type,n=e.target;"keydown"===t?32!==e.keyCode&&13!==e.keyCode||(helpers.modal.hide(n.closest("#".concat(n.dataset.modal)).closest(".modal")),helpers.scroll.enable()):"click"===t&&(helpers.modal.hide(n.closest("#".concat(n.dataset.modal)).closest(".modal")),helpers.scroll.enable())})})}),f&&f.forEach(function(e){return e.addEventListener("click",function(e){var t=e.target;helpers.modal.hide(t.closest(".modal")),helpers.scroll.enable()})})}});
//# sourceMappingURL=app.min.js.map