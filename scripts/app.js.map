{"version":3,"sources":["page.js","main-nav-list.js","login.js","slider.js","services.js","calculator.js","departments.js","form-departments.js","modal.js"],"names":["document","addEventListener","scroll","SmoothScroll","speed","speedAsDuration","page","querySelector","classList","remove","add","keydownHandler","keyCode","modals","querySelectorAll","forEach","modal","contains","body","style","cssText","clickHandler","target","trigger","toggleMenu","state","selector","nav","closest","setAttribute","Error","currentTarget","pageHeaderLogin","getScrollbarWidth","window","innerWidth","documentElement","clientWidth","form","dataset","formSubmit","formLogin","elements","login","getElementById","scrollbarWidth","localStorage","getItem","focus","mainSlider","Swiper","loop","spaceBetween","noSwiping","autoplay","delay","pagination","el","type","clickable","breakpoints","servicesListItems","servicesLinks","servicesTabs","eventHandler","event","activeElement","activeElementIndex","preventDefault","removeActiveTab","addActiveTab","eventName","link","linkIndex","e","section","tabIndex","Array","from","findIndex","tab","index","breakpoint","matchMedia","servicesSlider","enableSlider","removeActveClass","list","cls","item","makeFirstElementActive","breakpointChecker","matches","destroy","addListener","calculator","creditSelectionForm","creditSelectionTitle","creditSelectionFormField","creditCalculationForms","creditOfferingForm","creditRegistrationForm","messages","rejectMessage","errorMessage","filter","toggleFocus","element","parentElement","triggerClick","click","num2str","n","textForms","Math","abs","n1","getPercentage","partialValue","totalValue","round","x","multiplier","floor","getUnitPluralForm","unit","value","Number","nounRublePlurals","nounYearPlurals","getMaskOptions","format","mask","lazy","blocks","VALUE","scale","signed","thousandsSeparator","commit","masked","_value","padStart","padFractionalZeros","radix","String","evt","stopPropagation","toggle","stopImmediatePropagation","rect","getBoundingClientRect","isInFormField","top","clientY","height","left","clientX","width","calculatorCols","toggleCalculatorColVisibility","col","name","creditType","hidden","dispatchEvent","Event","textContent","previousElementSibling","makeInactive","input","disabled","makeActive","masks","inputs","buttons","push","IMask","button","formField","find","id","min","max","step","isNaN","unmaskedValue","maskUnit","updateOptions","bubbles","maskedInputNewValue","label","focusHandler","creditCalculationFormInputHandler","creditCalculationFormChangeHandler","divider","split","formModifier","fieldModifier","cost","initialPayment","initialPaymentRange","initialPaymentPercent","period","periodRange","calcAnnuityPayment","creditSum","monthlyInterestRate","periods","ceil","calcRequiredIncome","monthlyPayment","calcMonthlyInterestRate","interestRate","toFixed","calcPeriods","toggleMessage","currentValue","minValue","creditSumMinThreshold","modifiers","Map","messageData","modifier","get","toLocaleString","replace","creditTypeNames","fillInCreditOfferingForm","data","annuityPayment","requiredIncome","fieldName","renderCreditOfferingFormData","filteredMasks","includes","maternityCapital","maternityCapitalSum","checked","percentage","percentageRateThreshold","carInsurance","lifeInsurance","costThreshold","projectMember","projectMemberPercentage","personalMinThreshold","personalMaxThreshold","formRegistrationName","creditRegistrationFullNameInput","creditRegistrationEmailInput","creditRegistrationTelInput","formRegistrationApplicationNumber","registrationFormData","JSON","parse","fullName","tel","email","renderCreditRegistrationFormData","updateMask","formCalculationModifier","creditRegistrationCostMask","creditRegistrationInitialPaymentMask","creditRegistrationPeriodMask","formRegistrationPurposeInput","formRegistrationCostLabel","costInput","formRegistrationInitialPaymentInput","creditRegistrationInitialPaymentGroup","formRegistrationPeriodInput","toggleInvalid","parent","parentclassName","creditRegistrationFormInvalidHandler","validity","valid","creditRegistrationFormInputHandler","submitHandler","modalCalculator","formData","Object","fromEntries","FormData","setItem","stringify","map","objectManager","mapContainer","init","departments","russiaCoords","ymaps","center","zoom","controls","autoFitToViewport","ObjectManager","clusterize","gridSize","clusterDisableClickZoom","objects","options","set","iconLayout","iconImageHref","iconImageSize","iconImageOffset","fetch","then","response","json","group","geoObjects","bounds","getBounds","setBounds","behaviors","disable","handleChange","names","department","ready","container","fitToViewport","WatchJS","watch","modalPageHeader","modalCloseButtons","fieldElements","password","submitButton","errorMessages","empty","length","validate","fields","errors","updateStateErrors","updateValidationState","keys","every","key","loginFormData","processState","entries","rootElementClassName","rootElement","feedbackElement","innerHTML","errorMessageElement","createElement","append","showPassword","hidePassword","nextElementSibling","hideModal","modalCloseButton"],"mappings":"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","file":"app.js","sourcesContent":["/* global SmoothScroll */\n/* eslint-disable no-unused-vars */\n\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  const scroll = new SmoothScroll(`a[href*=\"#\"]`, {\n    speed: 1000,\n    speedAsDuration: true\n  });\n  const page = document.querySelector(`.page`);\n  page.classList.remove(`page_no_js`);\n  page.classList.add(`page_js`);\n\n  const keydownHandler = ({keyCode}) => {\n    if (keyCode === 27) {\n      const modals = document.querySelectorAll(`.modal`);\n\n      if (modals) {\n        modals.forEach((modal) => {\n          if (!modal.classList.contains(`modal--invisible`)) {\n            modal.classList.add(`modal--invisible`, `fadeOut`);\n            modal.classList.remove(`fadeIn`);\n          }\n          document.body.style.cssText = `padding-right: ''; overflow: ''`;\n        });\n      }\n\n      document.body.classList.remove(`page--overlay`);\n    }\n  };\n\n  const clickHandler = ({target}) => {\n    if (target.classList.contains(`page--overlay`)) {\n      target.classList.remove(`page--overlay`);\n      const modals = target.querySelectorAll(`.modal`);\n      modals.forEach((modal) => {\n        if (!modal.classList.contains(`modal--invisible`)) {\n          modal.classList.add(`modal--invisible`, `fadeOut`);\n          modal.classList.remove(`fadeIn`);\n        }\n        document.body.style.cssText = `padding-right: ''; overflow: ''`;\n      });\n    }\n  };\n\n  document.addEventListener(`keydown`, keydownHandler);\n  document.addEventListener(`click`, clickHandler);\n});\n","document.addEventListener(`DOMContentLoaded`, () => {\n  const trigger = document.querySelector(`.main-nav__trigger`);\n\n  const toggleMenu = (state, selector) => {\n    const nav = selector.closest(`.main-nav`).querySelector(`.main-nav-list`);\n\n    switch (state) {\n      case `close`:\n        selector.classList.remove(`main-nav__trigger--open-menu`);\n        selector.classList.add(`main-nav__trigger--close-menu`);\n        selector.setAttribute(`aria-label`, `Close menu`);\n        selector\n          .querySelector(`use`)\n          .setAttribute(`xlink:href`, `#main-nav__close`);\n        if (nav) {\n          nav.classList.remove(`main-nav-list--hidden`, `fadeOut`);\n          nav.classList.add(`animated`, `fadeIn`);\n        }\n        break;\n      case `open`:\n        selector.classList.remove(`main-nav__trigger--close-menu`);\n        selector.classList.add(`main-nav__trigger--open-menu`);\n\n        selector.setAttribute(`aria-label`, `Open menu`);\n        selector\n          .querySelector(`use`)\n          .setAttribute(`xlink:href`, `#main-nav__menu`);\n        if (nav) {\n          nav.classList.add(`main-nav-list--hidden`, `fadeOut`);\n          nav.classList.remove(`main-nav-list--hidden`, `fadeIn`);\n        }\n        break;\n      default:\n        throw new Error(`Unknown state: ${state}`);\n    }\n  };\n\n  const clickHandler = ({currentTarget}) => {\n    if (currentTarget.classList.contains(`main-nav__trigger--open-menu`)) {\n      toggleMenu(`close`, currentTarget);\n    } else if (\n      currentTarget.classList.contains(`main-nav__trigger--close-menu`)\n    ) {\n      toggleMenu(`open`, currentTarget);\n    }\n  };\n\n  if (trigger) {\n    trigger.addEventListener(`click`, clickHandler);\n  }\n});\n","document.addEventListener(`DOMContentLoaded`, () => {\n  const pageHeaderLogin = document.querySelector(`#page-header-login`);\n\n  const getScrollbarWidth = () =>\n    window.innerWidth - document.documentElement.clientWidth;\n\n  const clickHandler = ({target}) => {\n    const form = document.querySelector(`#${target.dataset.modal} form`);\n    let formSubmit = null;\n    let formLogin = null;\n\n    if (form) {\n      formSubmit = form.querySelector(`[type=\"submit\"]`);\n      formLogin = form.elements.login;\n    }\n\n    const modal = document.getElementById(target.dataset.modal);\n\n    if (modal) {\n      modal.classList.remove(`modal--invisible`, `fadeOut`);\n      modal.classList.add(`animated`, `fadeIn`);\n    }\n    if (!document.body.classList.contains(`page--overlay`)) {\n      document.body.classList.add(`page--overlay`);\n    }\n    const scrollbarWidth = getScrollbarWidth();\n    document.body.style.cssText = `background-color: #f6f7ff; padding-right: ${scrollbarWidth}px; overflow: hidden`;\n\n    if (localStorage.getItem(`loginFormData`)) {\n      if (formSubmit) {\n        formSubmit.focus();\n      }\n    } else {\n      if (formLogin) {\n        formLogin.focus();\n      }\n    }\n  };\n\n  if (pageHeaderLogin) {\n    pageHeaderLogin.addEventListener(`click`, clickHandler);\n  }\n});\n","/* global Swiper */\n/* eslint-disable no-unused-vars */\n\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  const mainSlider = new Swiper(`.about`, {\n    loop: true,\n    speed: 500,\n    spaceBetween: 10,\n    noSwiping: false,\n    autoplay: {\n      delay: 3000\n    },\n    pagination: {\n      el: `.swiper-pagination`,\n      type: `bullets`,\n      clickable: `false`\n    },\n    breakpoints: {\n      1024: {\n        noSwiping: true,\n        pagination: {\n          el: `.swiper-pagination`,\n          type: `bullets`,\n          clickable: true\n        },\n        autoplay: {\n          delay: 4000\n        }\n      }\n    }\n  });\n});\n","/* global Swiper */\n/* eslint-disable no-unused-vars */\n\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  // tab' switch behaviour\n  const servicesListItems = document.querySelectorAll(\n      `#services .services__list-item`\n  );\n  const servicesLinks = document.querySelectorAll(`#services .services__link`);\n  const servicesTabs = document.querySelectorAll(`#services .tab-services`);\n\n  if (servicesLinks && servicesTabs) {\n    const eventHandler = (event, activeElement, activeElementIndex) => {\n      const {type, keyCode} = event;\n\n      if (type === `click`) {\n        event.preventDefault();\n        removeActiveTab();\n        addActiveTab(activeElement, activeElementIndex);\n      } else if (type === `keyup` && keyCode === 9) {\n        removeActiveTab();\n        addActiveTab(activeElement, activeElementIndex);\n      }\n    };\n\n    [`click`, `keyup`].forEach((eventName) => {\n      servicesLinks.forEach((link, linkIndex) => {\n        link.addEventListener(eventName, (e) => eventHandler(e, link, linkIndex));\n      });\n    });\n\n    const removeActiveTab = () => {\n      servicesLinks.forEach((link) => {\n        link\n          .closest(`.services__list-item`)\n          .classList.remove(`services__list-item--active`);\n      });\n      servicesTabs.forEach((section) => {\n        section.classList.remove(`tab-services--active`);\n      });\n    };\n\n    const addActiveTab = (link, linkIndex) => {\n      link\n        .closest(`.services__list-item`)\n        .classList.add(`services__list-item--active`);\n      const tabIndex = Array.from(servicesTabs).findIndex(\n          (tab, index) => index === linkIndex\n      );\n      servicesTabs.forEach((tab, index) => {\n        if (index === tabIndex) {\n          tab.classList.add(`tab-services--active`);\n        }\n      });\n    };\n  }\n\n  // slider\n  const breakpoint = window.matchMedia(`only screen and (max-width: 1023px)`);\n  let servicesSlider = null;\n\n  const enableSlider = () => {\n    servicesSlider = new Swiper(`#services`, {\n      loop: true,\n      speed: 500,\n      spaceBetween: 10,\n      autoplay: {\n        delay: 3000\n      },\n      pagination: {\n        el: `.swiper-pagination`,\n        type: `bullets`,\n        clickable: `false`\n      }\n    });\n  };\n\n  const removeActveClass = (list, cls) => {\n    list.forEach((item) =>\n      item.classList.contains(`${cls}`)\n        ? item.classList.remove(`${cls}`)\n        : item\n    );\n  };\n\n  const makeFirstElementActive = (list, cls) => {\n    list.forEach((item, index) =>\n      index === 0\n        ? item.classList.add(`${cls}`)\n        : item.classList.remove(`${cls}`)\n    );\n  };\n\n  const breakpointChecker = () => {\n    if (breakpoint.matches) {\n      enableSlider();\n      if (servicesTabs && servicesListItems) {\n        removeActveClass(servicesTabs, `tab-service--active`);\n        removeActveClass(servicesListItems, `services__list-item--active`);\n      }\n    } else {\n      if (servicesSlider) {\n        servicesSlider.destroy();\n\n        if (servicesTabs && servicesListItems) {\n          makeFirstElementActive(servicesTabs, `tab-service--active`);\n          makeFirstElementActive(servicesListItems, `services__list-item--active`);\n        }\n      }\n    }\n  };\n\n  breakpointChecker();\n  breakpoint.addListener(breakpointChecker);\n});\n","/* global Map, IMask */\n/* eslint-disable no-unused-vars, new-cap, max-nested-callbacks */\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  const calculator = document.querySelector(`#calculator`);\n\n  let creditSelectionForm = null;\n  let creditSelectionTitle = null;\n  let creditSelectionFormField = null;\n\n  let creditCalculationForms = null;\n  let creditOfferingForm = null;\n  let creditRegistrationForm = null;\n\n  let messages = null;\n  let rejectMessage = null;\n  let errorMessage = null;\n\n  if (calculator) {\n    creditSelectionForm = calculator.querySelector(`#credit-selection`);\n    if (creditSelectionForm) {\n      creditSelectionTitle = creditSelectionForm.querySelector(`input`);\n      creditSelectionFormField = creditSelectionForm.querySelector(\n          `.calculator__form-field`\n      );\n    }\n\n    creditCalculationForms = calculator.querySelectorAll(\n        `.calculator__credit-form--calculation form`\n    );\n    creditOfferingForm = calculator.querySelector(`#credit-offer`);\n    creditRegistrationForm = calculator.querySelector(`#credit-registration`);\n\n    messages = calculator.querySelectorAll(`.calculator__message`);\n    if (messages) {\n      [rejectMessage] = Array.from(messages).filter((item) => {\n        if (item.classList.contains(`calculator__message--reject`)) {\n          return item;\n        }\n        return false;\n      });\n      [errorMessage] = Array.from(messages).filter((item) => {\n        if (item.classList.contains(`calculator__message--error`)) {\n          return item;\n        }\n        return false;\n      });\n    }\n  }\n\n  const toggleFocus = (element, parentElement, selector) => {\n    element.addEventListener(`focus`, () => {\n      if (!parentElement.classList.contains(`${selector}--focus`)) {\n        parentElement.classList.add(`${selector}--focus`);\n      }\n    });\n\n    element.addEventListener(`blur`, () => {\n      if (parentElement.classList.contains(`${selector}--focus`)) {\n        parentElement.classList.remove(`${selector}--focus`);\n      }\n    });\n  };\n\n  const triggerClick = (element) => {\n    element.addEventListener(`keydown`, (event) => {\n      const {keyCode, target} = event;\n      if (keyCode === 13 || keyCode === 32) {\n        target.click();\n      }\n    });\n  };\n\n  // вспомогательные функции\n  const num2str = (n, textForms) => {\n    n = Math.abs(n) % 100;\n    let n1 = n % 10;\n    if (n > 10 && n < 20) {\n      return textForms[2];\n    }\n    if (n1 > 1 && n1 < 5) {\n      return textForms[1];\n    }\n    if (n1 === 1) {\n      return textForms[0];\n    }\n    return textForms[2];\n  };\n\n  const getPercentage = (partialValue, totalValue) =>\n    (100 * partialValue) / totalValue;\n\n  const round = (x, multiplier) => {\n    if (x % multiplier === 0) {\n      return Math.floor(x / multiplier) * multiplier;\n    }\n    return Math.floor(x / multiplier) * multiplier + multiplier;\n  };\n\n  const getScrollbarWidth = () =>\n    window.innerWidth - document.documentElement.clientWidth;\n\n  // маски\n  const getUnitPluralForm = (unit, value) => {\n    switch (unit) {\n      case `currency`:\n        unit = ` ${num2str(Number(value), nounRublePlurals)}`;\n        break;\n\n      case `percent`:\n        unit = `%`;\n        break;\n\n      case `numero-sign`:\n        unit = `№`;\n        break;\n\n      case `period`:\n        unit = ` ${num2str(Number(value), nounYearPlurals)}`;\n        break;\n\n      case `empty`:\n        unit = ``;\n        break;\n\n      default:\n        throw new Error(`Unknown unit: ${unit}`);\n    }\n    return unit;\n  };\n\n  const getMaskOptions = (unit, format) => {\n    switch (format) {\n      case `integer`:\n        return {\n          mask: `VALUE${unit}`,\n          lazy: false,\n          blocks: {\n            VALUE: {\n              mask: Number,\n              scale: 0,\n              signed: false,\n              thousandsSeparator: ` `\n            }\n          }\n        };\n      case `4-digit integer`:\n        return {\n          mask: `${unit} VALUE`,\n          blocks: {\n            VALUE: {\n              mask: /^\\d+$/,\n              commit: (value, masked) =>\n                (masked._value = value.padStart(4, `0`))\n            }\n          }\n        };\n      case `fractional`:\n        return {\n          mask: `VALUE${unit}`,\n          lazy: false,\n          blocks: {\n            VALUE: {\n              mask: Number,\n              scale: 2,\n              signed: false,\n              padFractionalZeros: true,\n              radix: `,`\n            }\n          }\n        };\n      case `string`:\n        return {\n          mask: `VALUE`,\n          blocks: {\n            VALUE: {\n              mask: String\n            }\n          }\n        };\n      case `tel`:\n        return {\n          mask: `+{7}(000)000-00-00`,\n          lazy: true\n        };\n      case `full-name`:\n        return {\n          mask: /^[a-zA-Zа-яА-ЯёЁ ]+$/\n        };\n      case `email`:\n        return {\n          mask: /^\\S*@?\\S*$/\n        };\n      default:\n        throw new Error(`Unknown mask's format: ${format}`);\n    }\n  };\n\n  // склонение числительных окончаний слов\n  const nounRublePlurals = [`рубль`, `рубля`, `рублей`];\n  const nounYearPlurals = [`год`, `года`, `лет`];\n\n  // Шаг 1 (Цель кредита)\n  if (creditSelectionFormField) {\n    creditSelectionFormField.addEventListener(`click`, (evt) => {\n      event.stopPropagation();\n      const {currentTarget} = evt;\n      currentTarget.classList.toggle(`calculator__form-field--open`);\n\n      document.addEventListener(`click`, (event) => {\n        event.stopImmediatePropagation();\n        const rect = currentTarget.getBoundingClientRect();\n        const isInFormField =\n          rect.top <= event.clientY &&\n          event.clientY <= rect.top + rect.height &&\n          rect.left <= event.clientX &&\n          event.clientX <= rect.left + rect.width;\n        if (!isInFormField) {\n          if (\n            currentTarget.classList.contains(`calculator__form-field--open`)\n          ) {\n            currentTarget.classList.remove(`calculator__form-field--open`);\n          }\n        }\n      });\n    });\n  }\n\n  if (creditSelectionForm) {\n    const calculatorCols =\n      calculator && calculator.querySelectorAll(`.calculator__col`);\n    const toggleCalculatorColVisibility = () => {\n      calculatorCols.forEach((col) => {\n        if (\n          col.classList.contains(`calculator__col--right`) &&\n          col.classList.contains(`calculator__col--invisible`)\n        ) {\n          col.classList.remove(`calculator__col--invisible`);\n        }\n      });\n    };\n\n    creditSelectionForm\n      .querySelectorAll(`.calculator__forms-list-item`)\n      .forEach((item) => {\n        item.addEventListener(`click`, (event) => {\n          const {target} = event;\n          if (creditCalculationForms) {\n            creditCalculationForms.forEach((form) => {\n              if (form.name !== target.dataset.creditType) {\n                form.hidden = true;\n              } else {\n                form.hidden = false;\n                toggleCalculatorColVisibility();\n                form.dispatchEvent(new Event(`change`));\n              }\n            });\n          }\n          if (creditRegistrationForm) {\n            creditRegistrationForm.hidden = true;\n          }\n          if (creditSelectionTitle) {\n            creditSelectionTitle.value = target.textContent;\n            creditSelectionTitle.parentElement.classList.remove(\n                `calculator__form-field--open`\n            );\n          }\n        });\n        toggleFocus(\n            item,\n            item.parentElement.previousElementSibling,\n            `calculator__form-field`\n        );\n        triggerClick(item);\n      });\n  }\n\n  // Шаг 2 (параметры кредита)\n  const makeInactive = (list) => {\n    list.forEach((item) => {\n      item.value = `0`;\n      item.el.input.disabled = true;\n    });\n  };\n\n  const makeActive = (list) =>\n    list.forEach((item) => (item.el.input.disabled = false));\n\n  const masks = [];\n  if (creditCalculationForms) {\n    creditCalculationForms.forEach((form) => {\n      const inputs = form.querySelectorAll(\n          `input[type=\"text\"], input[type=\"range\"]`\n      );\n      const buttons = form.querySelectorAll(`button`);\n      if (inputs) {\n        inputs.forEach((input) => {\n          const unit = getUnitPluralForm(input.dataset.unit, input.value);\n          masks.push(IMask(input, getMaskOptions(unit, input.dataset.format)));\n        });\n      }\n\n      if (buttons) {\n        buttons.forEach((button) => {\n          button.addEventListener(`click`, (event) => {\n            const {target} = event;\n            const formField = target.closest(`.calculator__form-field`);\n            const {name} = target;\n            const mask = masks.find(\n                (item) => item.el.input.id === formField.querySelector(`input`).id\n            );\n            const {\n              dataset: {min = ``, max = ``, step = ``, unit = ``, format = ``}\n            } = mask.el.input;\n\n            if (Number.isNaN(Number(mask.unmaskedValue))) {\n              const maskUnit = getUnitPluralForm(unit, mask.unmaskedValue);\n              mask.updateOptions(getMaskOptions(maskUnit, format));\n              mask.value = `${Number(min)}`;\n              mask.el.input.dispatchEvent(\n                  new Event(`change`, {bubbles: true})\n              );\n              if (\n                formField &&\n                formField.classList.contains(`calculator__form-field--invalid`)\n              ) {\n                formField.classList.remove(`calculator__form-field--invalid`);\n              }\n            } else {\n              let maskedInputNewValue = 0;\n              if (name === `plus`) {\n                maskedInputNewValue = Number(mask.unmaskedValue) + Number(step);\n                if (maskedInputNewValue > Number(max)) {\n                  maskedInputNewValue = `${Number(max)}`;\n                }\n              } else if (name === `minus`) {\n                maskedInputNewValue = Number(mask.unmaskedValue) - Number(step);\n                if (maskedInputNewValue < Number(min)) {\n                  maskedInputNewValue = `${Number(min)}`;\n                }\n              }\n              mask.value = `${maskedInputNewValue}`;\n              mask.el.input.dispatchEvent(\n                  new Event(`change`, {bubbles: true})\n              );\n            }\n          });\n        });\n      }\n\n      form\n        .querySelectorAll(\n            `.calculator__form-field > button, .calculator__form-field > input`\n        )\n        .forEach((item) => {\n          toggleFocus(item, item.parentElement, `calculator__form-field`);\n        });\n\n      form.querySelectorAll(`label`).forEach((label) => triggerClick(label));\n    });\n  }\n\n  masks.forEach((mask) => {\n    const input = mask.el.input;\n    const formField = input.closest(`.calculator__form-field`);\n    let buttons = null;\n    if (formField) {\n      buttons = formField.querySelectorAll(`button`);\n    }\n\n    const focusHandler = () => {\n      if (\n        formField &&\n        formField.classList.contains(`calculator__form-field--invalid`)\n      ) {\n        formField.classList.remove(`calculator__form-field--invalid`);\n      }\n    };\n\n    const creditCalculationFormInputHandler = () => {\n      const maskUnit = getUnitPluralForm(\n          input.dataset.unit,\n          mask.unmaskedValue\n      );\n      mask.updateOptions(getMaskOptions(maskUnit, input.dataset.format));\n    };\n\n    const creditCalculationFormChangeHandler = ({target}) => {\n      const {\n        dataset: {min = ``, max = ``, step = ``, unit = ``, format = ``}\n      } = target;\n      const divider = `-credit-`;\n      const [formModifier, fieldModifier] = target.name.split(`${divider}`);\n\n      const [cost] = masks.filter(\n          (item) => item.el.input.name === `${formModifier}${divider}cost`\n      );\n\n      const [initialPayment] = masks.filter(\n          (item) =>\n            item.el.input.name === `${formModifier}${divider}initial-payment`\n      );\n      const [initialPaymentRange] = masks.filter(\n          (item) =>\n            item.el.input.name ===\n          `${formModifier}${divider}initial-payment-range`\n      );\n      const initialPaymentPercent = document.querySelector(\n          `#${formModifier}${divider}initial-payment-percent`\n      );\n\n      const [period] = masks.filter(\n          (item) => item.el.input.name === `${formModifier}${divider}period`\n      );\n      const [periodRange] = masks.filter(\n          (item) => item.el.input.name === `${formModifier}${divider}period-range`\n      );\n\n      let maskUnit = ``;\n\n      switch (fieldModifier) {\n        case `cost`:\n          if (\n            Number(mask.unmaskedValue) < Number(min) ||\n            Number(mask.unmaskedValue) > Number(max)\n          ) {\n            mask.updateOptions(getMaskOptions(``, `string`));\n            mask.value = `Некорректное значение`;\n            if (initialPayment) {\n              initialPayment.value = `0`;\n            }\n            if (\n              formField &&\n              !formField.classList.contains(`calculator__form-field--invalid`)\n            ) {\n              formField.classList.add(`calculator__form-field--invalid`);\n            }\n\n            if (initialPayment && initialPaymentRange) {\n              makeInactive([initialPayment, initialPaymentRange]);\n            }\n          } else {\n            if (initialPayment) {\n              initialPayment.value = `${Number(cost.unmaskedValue) *\n                (Number(initialPayment.el.input.dataset.min) / 100)}`;\n\n              if (initialPaymentRange) {\n                initialPaymentRange.value = `${Number(\n                    initialPaymentRange.el.input.min\n                )}`;\n              }\n            }\n\n            if (buttons) {\n              buttons.forEach((button) => (button.disabled = false));\n            }\n            if (initialPayment && initialPaymentRange) {\n              makeActive([initialPayment, initialPaymentRange]);\n            }\n          }\n          break;\n\n        case `initial-payment`:\n          if (Number(mask.unmaskedValue) >= Number(cost.unmaskedValue)) {\n            mask.value = `${Number(cost.unmaskedValue)}`;\n            if (initialPaymentRange) {\n              initialPaymentRange.value = `${max}`;\n            }\n          } else if (\n            getPercentage(Number(mask.unmaskedValue), cost.unmaskedValue) <\n            Number(min)\n          ) {\n            mask.value = `${Number(cost.unmaskedValue) / Number(min)}`;\n            if (initialPaymentRange) {\n              initialPaymentRange.value = `${min}`;\n            }\n          }\n\n          if (initialPaymentRange) {\n            initialPaymentRange.value = `${round(\n                getPercentage(\n                    Number(mask.unmaskedValue),\n                    Number(cost.unmaskedValue)\n                ),\n                Number(step)\n            )}`;\n          }\n\n          maskUnit = getUnitPluralForm(unit, mask.unmaskedValue);\n          mask.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n\n        case `initial-payment-range`:\n          if (initialPayment) {\n            initialPayment.value = `${Number(cost.unmaskedValue) *\n              (Number(mask.unmaskedValue) / 100)}`;\n            initialPayment.el.input.dispatchEvent(\n                new Event(`change`, {bubbles: true})\n            );\n            if (initialPaymentPercent) {\n              initialPaymentPercent.textContent = `${Number(\n                  mask.unmaskedValue\n              )}%`;\n            }\n          }\n          break;\n\n        case `period`:\n          if (Number(mask.unmaskedValue) > Number(max)) {\n            mask.value = `${Number(max)}`;\n            mask.updateOptions(getMaskOptions(mask, format));\n            if (periodRange) {\n              periodRange.value = `${max}`;\n            }\n          } else if (Number(mask.unmaskedValue) < Number(min)) {\n            mask.value = `${Number(min)}`;\n            mask.updateOptions(getMaskOptions(unit, format));\n            if (periodRange) {\n              periodRange.value = `${min}`;\n            }\n          }\n\n          if (periodRange) {\n            periodRange.value = `${round(\n                Number(mask.unmaskedValue),\n                Number(step)\n            )}`;\n          }\n          maskUnit = getUnitPluralForm(unit, mask.unmaskedValue);\n          mask.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n\n        case `period-range`:\n          if (period) {\n            period.value = `${Number(mask.unmaskedValue)}`;\n            period.el.input.dispatchEvent(\n                new Event(`change`, {bubbles: true})\n            );\n          }\n          break;\n\n        default:\n          throw new Error(`Unknown field's modifier: ${fieldModifier}`);\n      }\n      if (creditRegistrationForm) {\n        if (!creditRegistrationForm.hidden) {\n          creditRegistrationForm.hidden = true;\n        }\n      }\n    };\n\n    input.addEventListener(`input`, creditCalculationFormInputHandler);\n    input.addEventListener(`change`, creditCalculationFormChangeHandler);\n    input.addEventListener(`focus`, focusHandler);\n  });\n\n  // Секция «Наше предложение»\n  const calcAnnuityPayment = (creditSum, monthlyInterestRate, periods) =>\n    Math.ceil(\n        creditSum *\n        (monthlyInterestRate /\n          (1 - (1 + monthlyInterestRate) ** (Math.abs(periods) * -1)))\n    );\n  const calcRequiredIncome = (monthlyPayment) =>\n    Math.ceil((monthlyPayment / 45) * 100);\n  const calcMonthlyInterestRate = (interestRate) =>\n    Number((interestRate / 100 / 12).toFixed(5));\n  const calcPeriods = (period) => period * 12;\n\n  const toggleMessage = (type, currentValue, minValue) => {\n    const creditSumMinThreshold = 200000;\n    const modifiers = new Map([\n      [`mortgage`, `ипотечные`],\n      [`auto`, `автомобильные`],\n      [`personal`, `потребительские`]\n    ]);\n    if (currentValue < minValue) {\n      const messageData = rejectMessage.querySelectorAll(`span`);\n      const [modifier, value] = messageData;\n      modifier.textContent = modifiers.get(`${type}`);\n      value.textContent = `${minValue\n        .toLocaleString(`en-US`)\n        .replace(/,/g, ` `)} ${num2str(minValue, nounRublePlurals)}`;\n      rejectMessage.classList.remove(`calculator__message--invisible`);\n      creditOfferingForm.hidden = true;\n    } else {\n      rejectMessage.classList.add(`calculator__message--invisible`);\n      creditOfferingForm.hidden = false;\n    }\n\n    if (Number.isNaN(currentValue)) {\n      errorMessage.classList.remove(`calculator__message--invisible`);\n      creditOfferingForm.hidden = true;\n    } else {\n      errorMessage.classList.add(`calculator__message--invisible`);\n    }\n  };\n\n  const creditTypeNames = new Map([\n    [`mortgage`, `Сумма ипотеки`],\n    [`auto`, `Сумма автокредита`],\n    [`period`, `Сумма кредита`]\n  ]);\n\n  if (creditOfferingForm) {\n    const inputs = creditOfferingForm.querySelectorAll(`input`);\n    if (inputs) {\n      inputs.forEach((input) => {\n        const unit = getUnitPluralForm(input.dataset.unit, input.value);\n        masks.push(IMask(input, getMaskOptions(unit, input.dataset.format)));\n      });\n    }\n    creditOfferingForm\n      .querySelector(`button`)\n      .addEventListener(`click`, (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        creditRegistrationForm.hidden = false;\n      });\n  }\n\n  const fillInCreditOfferingForm = (elements, data) => {\n    const {creditSum, interestRate, annuityPayment, requiredIncome} = data;\n    elements.forEach((element) => {\n      const divider = `-offer-`;\n      const {unit, format} = element.el.input.dataset;\n      const {name} = element.el.input;\n      const [, fieldName] = name.split(`${divider}`);\n      let maskUnit = ``;\n      switch (fieldName) {\n        case `credit-sum`:\n          element.value = `${creditSum}`;\n          maskUnit = getUnitPluralForm(unit, element.unmaskedValue);\n          element.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n        case `interest-rate`:\n          element.value = `${interestRate}`;\n          maskUnit = getUnitPluralForm(unit, element.unmaskedValue);\n          element.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n        case `annuity-payment`:\n          element.value = `${annuityPayment}`;\n          maskUnit = getUnitPluralForm(unit, element.unmaskedValue);\n          element.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n        case `required-income`:\n          element.value = `${requiredIncome}`;\n          maskUnit = getUnitPluralForm(unit, element.unmaskedValue);\n          element.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n\n        default:\n          throw new Error(`Unknown field's name: ${name}`);\n      }\n    });\n  };\n\n  const renderCreditOfferingFormData = ({currentTarget}) => {\n    const divider = `-credit-`;\n    const [, formModifier] = currentTarget.name.split(`-`);\n\n    const [cost] = masks.filter((mask) => {\n      return mask.el.input.name === `${formModifier}${divider}cost`;\n    });\n    const [initialPayment] = masks.filter(\n        (mask) => mask.el.input.name === `${formModifier}${divider}initial-payment`\n    );\n    const [period] = masks.filter(\n        (mask) => mask.el.input.name === `${formModifier}${divider}period`\n    );\n\n    if (creditOfferingForm) {\n      creditOfferingForm.querySelector(\n          `label[for=\"credit-offer-credit-sum\"]`\n      ).textContent = creditTypeNames.get(`${formModifier}`);\n    }\n\n    let periods = calcPeriods(Number(period.unmaskedValue));\n    const filteredMasks = Array.from(masks).filter((mask) =>\n      mask.el.input.name.includes(`offer`)\n    );\n\n    if (cost && period) {\n      switch (formModifier) {\n        case `mortgage`:\n          const [maternityCapital] = Array.from(currentTarget.elements).filter(\n              (element) =>\n                element.name === `${formModifier}${divider}maternity-capital`\n          );\n\n          if (initialPayment && maternityCapital) {\n            const maternityCapitalSum = maternityCapital.checked ? 470000 : 0;\n            const creditSum =\n              Number(cost.unmaskedValue) -\n              Number(initialPayment.unmaskedValue) -\n              maternityCapitalSum;\n\n            const percentage = getPercentage(\n                Number(initialPayment.unmaskedValue),\n                Number(cost.unmaskedValue)\n            );\n            const percentageRateThreshold = 15;\n            let interestRate = 0;\n\n            if (percentage < percentageRateThreshold) {\n              interestRate = 9.4;\n            } else if (percentage >= percentageRateThreshold) {\n              interestRate = 8.5;\n            }\n            const monthlyInterestRate = calcMonthlyInterestRate(interestRate);\n            const annuityPayment = calcAnnuityPayment(\n                creditSum,\n                monthlyInterestRate,\n                periods\n            );\n            const requiredIncome = calcRequiredIncome(annuityPayment);\n\n            toggleMessage(formModifier, creditSum, 500000);\n\n            fillInCreditOfferingForm(filteredMasks, {\n              creditSum,\n              interestRate,\n              annuityPayment,\n              requiredIncome\n            });\n          }\n          break;\n\n        case `auto`:\n          const [carInsurance] = Array.from(currentTarget.elements).filter(\n              (element) => element.name === `${formModifier}${divider}car-insurance`\n          );\n          const [lifeInsurance] = Array.from(currentTarget.elements).filter(\n              (element) =>\n                element.name === `${formModifier}${divider}life-insurance`\n          );\n\n          if (initialPayment && carInsurance && lifeInsurance) {\n            const creditSum =\n              Number(cost.unmaskedValue) - Number(initialPayment.unmaskedValue);\n\n            let costThreshold = 2000000;\n            let interestRate = 0;\n            if (Number(cost.unmaskedValue) < costThreshold) {\n              interestRate = 16;\n            } else if (Number(cost.unmaskedValue) > costThreshold) {\n              interestRate = 15;\n            }\n\n            if (carInsurance.checked || lifeInsurance.checked) {\n              interestRate = 8.5;\n            }\n\n            if (carInsurance.checked && lifeInsurance.checked) {\n              interestRate = 3.5;\n            }\n\n            const monthlyInterestRate = calcMonthlyInterestRate(interestRate);\n            const annuityPayment = calcAnnuityPayment(\n                creditSum,\n                monthlyInterestRate,\n                periods\n            );\n            const requiredIncome = calcRequiredIncome(annuityPayment);\n\n            toggleMessage(formModifier, creditSum, 200000);\n\n            fillInCreditOfferingForm(filteredMasks, {\n              creditSum,\n              interestRate,\n              annuityPayment,\n              requiredIncome\n            });\n          }\n          break;\n\n        case `personal`:\n          const [projectMember] = Array.from(currentTarget.elements).filter(\n              (element) =>\n                element.name === `${formModifier}${divider}project-member`\n          );\n\n          if (projectMember) {\n            const creditSum = Number(cost.unmaskedValue);\n            const projectMemberPercentage = projectMember.checked ? 0.5 : 0;\n            const personalMinThreshold = 750000;\n            const personalMaxThreshold = 2000000;\n            let interestRate = 0;\n\n            if (Number(cost.unmaskedValue) < personalMinThreshold) {\n              interestRate = 15 - projectMemberPercentage;\n            } else if (\n              Number(cost.unmaskedValue) <= personalMinThreshold &&\n              Number(cost.unmaskedValue) < personalMaxThreshold\n            ) {\n              interestRate = 12.5 - projectMemberPercentage;\n            } else if (Number(cost.unmaskedValue) > personalMaxThreshold) {\n              interestRate = 9.5 - projectMemberPercentage;\n            }\n\n            const monthlyInterestRate = calcMonthlyInterestRate(interestRate);\n            const annuityPayment = calcAnnuityPayment(\n                creditSum,\n                monthlyInterestRate,\n                periods\n            );\n            const requiredIncome = calcRequiredIncome(annuityPayment);\n\n            toggleMessage(formModifier, creditSum, 0);\n\n            fillInCreditOfferingForm(filteredMasks, {\n              creditSum,\n              interestRate,\n              annuityPayment,\n              requiredIncome\n            });\n          }\n          break;\n\n        default:\n          throw new Error(`Unknown form's modifier: ${formModifier}`);\n      }\n    }\n  };\n\n  // Шаг 3 (оформление заявки)\n  if (creditRegistrationForm) {\n    const formRegistrationName = creditRegistrationForm.name;\n    const inputs = creditRegistrationForm.querySelectorAll(`input`);\n\n    if (inputs) {\n      inputs.forEach((input) => {\n        const unit = getUnitPluralForm(input.dataset.unit, input.value);\n        masks.push(IMask(input, getMaskOptions(unit, input.dataset.format)));\n      });\n    }\n\n    const [creditRegistrationFullNameInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-full-name`;\n    });\n\n    const [creditRegistrationEmailInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-email`;\n    });\n\n    const [creditRegistrationTelInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-tel`;\n    });\n\n    const [formRegistrationApplicationNumber] = masks.filter((mask) => {\n      return (\n        mask.el.input.name === `${formRegistrationName}-application-number`\n      );\n    });\n\n    const registrationFormData = localStorage.getItem(`registrationFormData`)\n      ? JSON.parse(localStorage.getItem(`registrationFormData`))\n      : {\n        fullName: ``,\n        tel: ``,\n        email: ``\n      };\n    const {fullName, tel, email} = registrationFormData;\n\n    if (creditRegistrationFullNameInput) {\n      creditRegistrationFullNameInput.value = fullName;\n    }\n\n    if (creditRegistrationEmailInput) {\n      creditRegistrationEmailInput.value = email;\n    }\n\n    if (creditRegistrationTelInput) {\n      creditRegistrationTelInput.value = tel;\n    }\n\n    if (formRegistrationApplicationNumber) {\n      formRegistrationApplicationNumber.value = `1`;\n    }\n  }\n\n  const renderCreditRegistrationFormData = ({currentTarget}) => {\n    const updateMask = (mask) => {\n      const {unit, format} = mask.el.input.dataset;\n      const maskUnit = getUnitPluralForm(unit, mask.unmaskedValue);\n      mask.updateOptions(getMaskOptions(maskUnit, format));\n    };\n    // поля формы с параметрами кредита\n    const divider = `-credit-`;\n    const [, formCalculationModifier] = currentTarget.name.split(`-`);\n\n    const [creditRegistrationCostMask] = masks.filter((mask) => {\n      return mask.el.input.name === `${formCalculationModifier}${divider}cost`;\n    });\n    const [creditRegistrationInitialPaymentMask] = masks.filter(\n        (mask) =>\n          mask.el.input.name ===\n        `${formCalculationModifier}${divider}initial-payment`\n    );\n    const [creditRegistrationPeriodMask] = masks.filter(\n        (mask) =>\n          mask.el.input.name === `${formCalculationModifier}${divider}period`\n    );\n\n    // поля формы оформления заявки\n    const formRegistrationName =\n      creditRegistrationForm && creditRegistrationForm.name;\n\n    const [formRegistrationPurposeInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-purpose`;\n    });\n\n    const formRegistrationCostLabel =\n      creditRegistrationForm &&\n      creditRegistrationForm.querySelector(`[for=\"credit-registration-cost\"]`);\n    const [costInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-cost`;\n    });\n\n    const [formRegistrationInitialPaymentInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-initial-payment`;\n    });\n    const creditRegistrationInitialPaymentGroup =\n      creditRegistrationForm &&\n      creditRegistrationForm\n        .querySelector(`input[name=\"${formRegistrationName}-initial-payment\"]`)\n        .closest(`.calculator__form-field`);\n\n    const [formRegistrationPeriodInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-period`;\n    });\n\n    switch (formCalculationModifier) {\n      case `mortgage`:\n        formRegistrationPurposeInput.value = `Ипотека`;\n        if (creditRegistrationCostMask) {\n          formRegistrationCostLabel.textContent = `Стоимость недвижимости`;\n        }\n        break;\n\n      case `auto`:\n        formRegistrationPurposeInput.value = `Автокредит`;\n        if (creditRegistrationCostMask) {\n          formRegistrationCostLabel.textContent = `Стоимость автомобиля`;\n        }\n        break;\n\n      case `personal`:\n        formRegistrationPurposeInput.value = `Потребительский кредит`;\n        if (creditRegistrationCostMask) {\n          formRegistrationCostLabel.textContent = `Сумма кредита`;\n        }\n        break;\n\n      default:\n        throw new Error(`Unknown modifier: ${formCalculationModifier}`);\n    }\n\n    if (creditRegistrationCostMask) {\n      costInput.value = creditRegistrationCostMask.unmaskedValue;\n      updateMask(costInput);\n    }\n    if (creditRegistrationInitialPaymentMask) {\n      formRegistrationInitialPaymentInput.value =\n        creditRegistrationInitialPaymentMask.unmaskedValue;\n      creditRegistrationInitialPaymentGroup.classList.remove(\n          `calculator__form-field--invisible`\n      );\n      updateMask(formRegistrationInitialPaymentInput);\n    } else {\n      creditRegistrationInitialPaymentGroup.classList.add(\n          `calculator__form-field--invisible`\n      );\n    }\n\n    if (creditRegistrationPeriodMask) {\n      formRegistrationPeriodInput.value =\n        creditRegistrationPeriodMask.unmaskedValue;\n      updateMask(formRegistrationPeriodInput);\n    }\n  };\n\n  if (creditCalculationForms) {\n    creditCalculationForms.forEach((form) => {\n      form.addEventListener(`change`, renderCreditOfferingFormData);\n      form.addEventListener(`change`, renderCreditRegistrationFormData);\n    });\n  }\n\n  if (creditRegistrationForm) {\n    const formRegistrationName = creditRegistrationForm.name;\n\n    const [fullName] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-full-name`;\n    });\n\n    const [tel] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-tel`;\n    });\n\n    const [email] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-email`;\n    });\n\n    const toggleInvalid = (element, state) => {\n      const parent = element.parentElement;\n      const [parentclassName] = parent.classList;\n      if (state === `valid`) {\n        if (\n          parent &&\n          parent.classList.contains(`${parentclassName}--invalid`)\n        ) {\n          parent.classList.remove(`${parentclassName}--invalid`);\n          parent.classList.remove(`animated`, `shake`);\n        }\n      } else if (state === `invalid`) {\n        if (\n          parent &&\n          !parent.classList.contains(`${parentclassName}--invalid`)\n        ) {\n          parent.classList.add(`${parentclassName}--invalid`);\n          parent.classList.add(`animated`, `shake`);\n        }\n      }\n    };\n\n    const creditRegistrationFormInvalidHandler = ({target}) => {\n      if (!target.validity.valid) {\n        toggleInvalid(target, `invalid`);\n      }\n    };\n\n    const creditRegistrationFormInputHandler = ({target}) => {\n      toggleInvalid(target, `valid`);\n    };\n\n    [fullName, email, tel].forEach((mask) => {\n      mask.el.input.addEventListener(\n          `invalid`,\n          creditRegistrationFormInvalidHandler\n      );\n      mask.el.input.addEventListener(\n          `input`,\n          creditRegistrationFormInputHandler\n      );\n    });\n\n    const submitHandler = (event) => {\n      event.preventDefault();\n      const {target} = event;\n      toggleInvalid(target, `valid`);\n      const modalCalculator = document.querySelector(`.modal--calculator`);\n      const [formRegistrationApplicationNumber] = masks.filter((mask) => {\n        return (\n          mask.el.input.name === `${formRegistrationName}-application-number`\n        );\n      });\n      const formData = Object.fromEntries(new FormData(target));\n\n      localStorage.setItem(\n          `registrationFormData`,\n          JSON.stringify({\n            fullName: formData[`${formRegistrationName}-full-name`],\n            email: formData[`${formRegistrationName}-email`],\n            tel: formData[`${formRegistrationName}-tel`]\n          })\n      );\n\n      if (formRegistrationApplicationNumber) {\n        formRegistrationApplicationNumber.unmaskedValue = `${Number(\n            formRegistrationApplicationNumber.unmaskedValue\n        ) + 1}`;\n      }\n\n      creditRegistrationForm.hidden = true;\n      if (modalCalculator.classList.contains(`modal--invisible`)) {\n        modalCalculator.classList.remove(`modal--invisible`, `fadeOut`);\n        modalCalculator.classList.add(`animated`, `fadeIn`);\n      }\n      const scrollbarWidth = getScrollbarWidth();\n      document.body.classList.add(`page--overlay`);\n      document.body.style.cssText = `background-color: #f6f7ff; padding-right: ${scrollbarWidth}px; overflow: hidden`;\n\n      if (creditCalculationForms) {\n        creditCalculationForms.forEach((form) => {\n          if (!form.hidden) {\n            form.hidden = !form.hidden;\n          }\n        });\n      }\n\n      if (creditOfferingForm) {\n        creditOfferingForm.hidden = true;\n      }\n    };\n\n    creditRegistrationForm.addEventListener(`submit`, submitHandler);\n  }\n});\n","/* global ymaps */\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  let map;\n  let objectManager;\n  const mapContainer = document.querySelector(`#map`);\n\n  const init = () => {\n    const departments =\n      mapContainer && JSON.parse(mapContainer.dataset.departments);\n    const russiaCoords = [61.698653, 99.505405];\n    map = new ymaps.Map(\n        mapContainer,\n        {\n          center: russiaCoords,\n          zoom: [9],\n          controls: []\n        },\n        {\n          autoFitToViewport: `always`\n        }\n    );\n\n    objectManager = new ymaps.ObjectManager({\n      clusterize: true,\n      gridSize: 32,\n      clusterDisableClickZoom: true\n    });\n\n    objectManager.objects.options.set({\n      iconLayout: `default#image`,\n      iconImageHref: `./static/departments/map_marker.svg`,\n      iconImageSize: [35, 40],\n      iconImageOffset: [-17, -20]\n    });\n\n    fetch(`./static/departments/departments.json`)\n      .then((response) => response.json())\n      .then((data) => {\n        objectManager.add(\n            (data[`features`] = data[`features`].filter((item) =>\n              departments.includes(item.group)\n            ))\n        );\n        map.geoObjects.add(objectManager);\n        const bounds = objectManager.getBounds();\n        if (bounds) {\n          map.setBounds(objectManager.getBounds());\n        }\n      });\n\n    map.behaviors.disable(`scrollZoom`);\n  };\n\n  const handleChange = ({currentTarget}) => {\n    const names = Array.from(currentTarget.elements.department)\n      .map((department) => {\n        if (department.checked) {\n          const [, name] = department.id.split(`-`);\n          return name;\n        }\n        return false;\n      })\n      .filter((name) => name);\n    if (mapContainer) {\n      mapContainer.dataset.departments = JSON.stringify(names);\n    }\n    if (map) {\n      map.destroy();\n    }\n    ymaps.ready(init);\n  };\n\n  document\n    .querySelector(`#departments-form`)\n    .addEventListener(`change`, handleChange);\n\n  window.addEventListener(`resize`, () => {\n    if (map && objectManager) {\n      map.setBounds(objectManager.getBounds());\n      map.container.fitToViewport();\n    }\n  });\n\n  ymaps.ready(init);\n});\n","document.addEventListener(`DOMContentLoaded`, () => {\n  const triggerClick = (element) => {\n    element.addEventListener(`keydown`, (event) => {\n      const {keyCode, target} = event;\n      if (keyCode === 13 || keyCode === 32) {\n        target.click();\n      }\n    });\n  };\n\n  document\n    .querySelectorAll(`form#departments-form label`)\n    .forEach((label) => triggerClick(label));\n});\n","/* global WatchJS */\nconst {watch} = WatchJS;\n\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  // Modal Form Validation (Observer Pattern, MVC)\n  const modalPageHeader = document.querySelector(`#modal-page-header`);\n  const modalCloseButtons = document.querySelectorAll(`.modal__trigger`);\n\n  const form = modalPageHeader.querySelector(`form`);\n  const fieldElements = {\n    login: form.querySelector(`.login-modal-form-field input`),\n    password: form.querySelector(`.password-modal-form-field input`)\n  };\n  const submitButton = form.querySelector(`button[type=\"submit\"]`);\n\n  const errorMessages = {\n    login: {\n      empty: `Обязательно к заполнению`\n    },\n    password: {\n      empty: `Обязательно к заполнению`,\n      length: `Минимальная длина пароля — 6 символов`\n    }\n  };\n\n  const validate = (fields, name) => {\n    const errors = {};\n    switch (name) {\n      case `login`:\n        if (!fields.login) {\n          errors.login = errorMessages.login.empty;\n        } else {\n          errors.login = ``;\n        }\n        break;\n      case `password`:\n        if (!fields.password) {\n          errors.password = errorMessages.password.empty;\n        } else if (fields.password.length < 6) {\n          errors.password = errorMessages.password.length;\n        } else {\n          errors.password = ``;\n        }\n        break;\n\n      default:\n        throw new Error(`Unknown field's name: ${name}`);\n    }\n    return {...state.form.errors, ...errors};\n  };\n\n  const updateStateErrors = (state, name) => {\n    const errors = validate(state.form.fields, name);\n    state.form.errors = errors;\n  };\n\n  const updateValidationState = (errors) => {\n    state.form.valid = Object.keys(errors).every((key) => {\n      return errors[key].length === 0;\n    });\n  };\n\n  const loginFormData = localStorage.getItem(`loginFormData`)\n    ? JSON.parse(localStorage.getItem(`loginFormData`))\n    : {login: ``, password: ``};\n\n  const {login, password} = loginFormData;\n\n  const state = {\n    form: {\n      processState: `filling`, // sending, finished\n      fields: {\n        login,\n        password\n      },\n      valid: true,\n      errors: {\n        login: ``,\n        password: ``\n      }\n    }\n  };\n\n  if (modalPageHeader && form) {\n    if (fieldElements[`login`] && fieldElements[`password`]) {\n      Object.entries(fieldElements).forEach(([name, element]) => {\n        element.value = state.form.fields[name];\n        element.addEventListener(`input`, (e) => {\n          state.form.fields[name] = e.target.value;\n          updateStateErrors(state, name);\n          updateValidationState(state.form.errors);\n        });\n      });\n\n      watch(state.form, `errors`, () => {\n        Object.entries(fieldElements).forEach(([name, element]) => {\n          const rootElementClassName = `${name}-modal-form-field`;\n          const rootElement = element.closest(`.${rootElementClassName}`);\n\n          if (rootElement) {\n            const feedbackElement = rootElement.querySelector(\n                `.${rootElementClassName}__feedback`\n            );\n            const errorMessage = state.form.errors[name];\n\n            if (\n              feedbackElement.querySelector(\n                  `.${rootElementClassName}__error-message`\n              )\n            ) {\n              rootElement.classList.remove(`${rootElementClassName}--invalid`);\n              feedbackElement.innerHTML = ``;\n            }\n\n            if (!errorMessage) {\n              return;\n            }\n            const errorMessageElement = document.createElement(`span`);\n            errorMessageElement.classList.add(\n                `${rootElementClassName}__error-message`\n            );\n            errorMessageElement.innerHTML = errorMessage;\n            feedbackElement.append(errorMessageElement);\n            rootElement.classList.add(`${rootElementClassName}--invalid`);\n          }\n        });\n      });\n    }\n\n    if (submitButton) {\n      watch(state.form, `processState`, () => {\n        const {processState} = state.form;\n        switch (processState) {\n          case `filling`:\n            submitButton.disabled = true;\n            break;\n          case `sending`:\n            submitButton.disabled = true;\n            break;\n          case `finished`:\n            modalPageHeader.classList.add(`modal--invisible`, `fadeOut`);\n            modalPageHeader.classList.remove(`fadeIn`);\n            document.body.style.cssText = `padding-right: ''; overflow: ''`;\n            document.body.classList.remove(`page--overlay`);\n            break;\n          default:\n            throw new Error(`Unknown state: ${processState}`);\n        }\n      });\n\n      watch(state.form, `valid`, () => {\n        submitButton.disabled = !state.form.valid;\n      });\n    }\n\n    form.addEventListener(`submit`, (event) => {\n      event.preventDefault();\n      const {target} = event;\n      state.form.processState = `sending`;\n      const formData = new FormData(target);\n      localStorage.setItem(\n          `loginFormData`,\n          JSON.stringify(Object.fromEntries(formData))\n      );\n\n      Object.entries(fieldElements).forEach(([name]) => {\n        updateStateErrors(state, name);\n      });\n      updateValidationState(state.form.errors);\n\n      if (state.form.valid) {\n        state.form.processState = `finished`;\n      } else {\n        const {errors} = state.form;\n        state.form.processState = `filling`;\n        for (const name of Object.keys(errors)) {\n          if (errors[name] !== 0) {\n            fieldElements[name].focus();\n            break;\n          }\n        }\n      }\n    });\n\n    // show / hide password\n    const showPassword = (event) => {\n      const {target, type} = event;\n      const input = target.previousElementSibling;\n      if (type === `mousedown`) {\n        input.setAttribute(`type`, `text`);\n      } else if (\n        (type === `keydown` && event.keyCode === 13) ||\n        (type === `keydown` && event.keyCode === 32)\n      ) {\n        input.setAttribute(`type`, `text`);\n      }\n    };\n\n    const hidePassword = ({target}) => {\n      const input = target.previousElementSibling;\n      input.setAttribute(`type`, `password`);\n    };\n\n    [`mousedown`, `keydown`].forEach((event) => {\n      fieldElements[`password`].nextElementSibling.addEventListener(\n          event,\n          showPassword\n      );\n    });\n\n    [`mouseup`, `keyup`].forEach((event) =>\n      fieldElements[`password`].nextElementSibling.addEventListener(\n          event,\n          hidePassword\n      )\n    );\n\n    // Modal Visibility\n    const hideModal = (modal) => {\n      modal.classList.add(`modal--invisible`, `fadeOut`);\n      modal.classList.remove(`fadeIn`);\n      if (document.body.classList.contains(`page--overlay`)) {\n        document.body.classList.remove(`page--overlay`);\n      }\n      document.body.style.cssText = `background-color: ''; padding-right: ''; overflow: ''`;\n    };\n\n    if (modalCloseButtons) {\n      [`click`, `keydown`].forEach((event) =>\n        modalCloseButtons.forEach((modalCloseButton) =>\n          modalCloseButton.addEventListener(event, (e) => {\n            const {type, target} = e;\n            if (type === `keydown`) {\n              if (e.keyCode === 32 || e.keyCode === 13) {\n                hideModal(target.closest(`#${target.dataset.modal}`));\n              }\n            } else if (type === `click`) {\n              hideModal(target.closest(`#${target.dataset.modal}`));\n            }\n          })\n        )\n      );\n    }\n  }\n});\n"]}