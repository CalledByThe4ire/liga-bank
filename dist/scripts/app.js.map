{"version":3,"sources":["helpers.js","page.js","main-nav-list.js","login.js","slider.js","services.js","calculator.js","departments.js","form-departments.js","modal.js"],"names":["helpers","modal","hide","classList","add","remove","show","scroll","disable","document","body","style","paddingRight","getScrollbarWidth","enable","hideModal","contains","num2str","n","textForms","Math","abs","n1","getPercentage","partialValue","totalValue","round","x","multiplier","floor","window","innerWidth","documentElement","clientWidth","addEventListener","SmoothScroll","speed","speedAsDuration","modals","querySelectorAll","keydownHandler","keyCode","forEach","trigger","querySelector","toggleMenu","state","selector","nav","closest","setAttribute","Error","clickHandler","currentTarget","event","e","type","target","pageHeaderLogin","form","dataset","formSubmit","formLogin","elements","login","getElementById","localStorage","getItem","focus","mainSlider","Swiper","loop","spaceBetween","noSwiping","autoplay","delay","pagination","el","clickable","breakpoints","servicesListItems","servicesLinks","servicesTabs","eventHandler","activeElement","activeElementIndex","preventDefault","removeActiveTab","addActiveTab","eventName","link","linkIndex","section","tabIndex","Array","from","findIndex","tab","index","breakpoint","matchMedia","servicesSlider","enableSlider","removeActveClass","list","cls","item","makeFirstElementActive","breakpointChecker","matches","destroy","addListener","calculator","creditSelectionForm","creditSelectionTitle","creditSelectionFormField","creditCalculationForms","creditOfferingForm","creditRegistrationForm","messages","rejectMessage","errorMessage","filter","toggleFocus","element","parentElement","triggerClick","click","getUnitPluralForm","unit","value","Number","nounRublePlurals","nounYearPlurals","getMaskOptions","format","mask","lazy","blocks","VALUE","scale","signed","thousandsSeparator","commit","masked","_value","padStart","padFractionalZeros","radix","String","evt","stopPropagation","toggle","stopImmediatePropagation","rect","getBoundingClientRect","isInFormField","top","clientY","height","left","clientX","width","calculatorCols","toggleCalculatorColVisibility","col","name","creditType","hidden","dispatchEvent","Event","textContent","previousElementSibling","makeInactive","input","disabled","makeActive","masks","inputs","buttons","push","IMask","button","formField","find","id","min","max","step","isNaN","unmaskedValue","maskUnit","updateOptions","bubbles","maskedInputNewValue","label","focusHandler","creditCalculationFormInputHandler","creditCalculationFormChangeHandler","divider","split","formModifier","fieldModifier","cost","initialPayment","initialPaymentRange","initialPaymentPercent","period","periodRange","calcAnnuityPayment","creditSum","monthlyInterestRate","periods","ceil","calcRequiredIncome","monthlyPayment","calcMonthlyInterestRate","interestRate","toFixed","calcPeriods","toggleMessage","currentValue","minValue","creditSumMinThreshold","modifiers","Map","messageData","modifier","get","toLocaleString","replace","creditTypeNames","fillInCreditOfferingForm","data","annuityPayment","requiredIncome","fieldName","renderCreditOfferingFormData","filteredMasks","includes","maternityCapital","maternityCapitalSum","checked","percentage","percentageRateThreshold","carInsurance","lifeInsurance","costThreshold","projectMember","projectMemberPercentage","personalMinThreshold","personalMaxThreshold","formRegistrationName","creditRegistrationFullNameInput","creditRegistrationEmailInput","creditRegistrationTelInput","formRegistrationApplicationNumber","registrationFormData","JSON","parse","fullName","tel","email","renderCreditRegistrationFormData","updateMask","formCalculationModifier","creditRegistrationCostMask","creditRegistrationInitialPaymentMask","creditRegistrationPeriodMask","formRegistrationPurposeInput","formRegistrationCostLabel","costInput","formRegistrationInitialPaymentInput","creditRegistrationInitialPaymentGroup","formRegistrationPeriodInput","toggleInvalid","parent","parentclassName","creditRegistrationFormInvalidHandler","validity","valid","creditRegistrationFormInputHandler","submitHandler","modalCalculator","formData","Object","fromEntries","FormData","setItem","stringify","map","objectManager","mapContainer","init","departments","russiaCoords","ymaps","center","zoom","controls","autoFitToViewport","ObjectManager","clusterize","gridSize","clusterDisableClickZoom","objects","options","set","iconLayout","iconImageHref","iconImageSize","iconImageOffset","fetch","then","response","json","group","geoObjects","bounds","getBounds","setBounds","behaviors","handleChange","names","department","ready","container","fitToViewport","WatchJS","watch","modalPageHeader","fieldElements","password","submitButton","errorMessages","empty","length","validate","fields","errors","updateStateErrors","updateValidationState","keys","every","key","loginFormData","processState","entries","rootElementClassName","rootElement","feedbackElement","innerHTML","errorMessageElement","createElement","append","cssText","showPassword","hidePassword","nextElementSibling","modalCloseButtons","modalOverlays","events","modalCloseButton","modalOverlay"],"mappings":"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","file":"app.js","sourcesContent":["/* eslint-disable no-unused-vars */\nconst helpers = {\n  modal: {\n    hide(modal) {\n      modal.classList.add(`modal--invisible`, `fadeOut`);\n      modal.classList.remove(`fadeIn`);\n    },\n    show(modal) {\n      modal.classList.remove(`modal--invisible`, `fadeOut`);\n      modal.classList.add(`fadeIn`);\n    }\n  },\n  scroll: {\n    disable() {\n      document.body.classList.add(`page--no-scroll`);\n      document.body.classList.remove(`page--transparent`);\n      document.body.style.paddingRight = `${helpers.getScrollbarWidth()}px`;\n    },\n    enable() {\n      document.body.classList.remove(`page--no-scroll`);\n      document.body.classList.add(`page--transparent`);\n      document.body.style.paddingRight = ``;\n    }\n  },\n  hideModal(modal) {\n    if (!modal.classList.contains(`modal--invisible`)) {\n      modal.classList.add(`modal--invisible`, `fadeOut`);\n      modal.classList.remove(`fadeIn`);\n    }\n\n    document.body.classList.remove(`page--no-scroll`);\n    document.body.classList.add(`page--transparent`);\n    document.body.style.paddingRight = ``;\n  },\n  num2str(n, textForms) {\n    n = Math.abs(n) % 100;\n    let n1 = n % 10;\n    if (n > 10 && n < 20) {\n      return textForms[2];\n    }\n    if (n1 > 1 && n1 < 5) {\n      return textForms[1];\n    }\n    if (n1 === 1) {\n      return textForms[0];\n    }\n    return textForms[2];\n  },\n  getPercentage(partialValue, totalValue) {\n    return (100 * partialValue) / totalValue;\n  },\n  round(x, multiplier) {\n    if (x % multiplier === 0) {\n      return Math.floor(x / multiplier) * multiplier;\n    }\n    return Math.floor(x / multiplier) * multiplier + multiplier;\n  },\n  getScrollbarWidth() {\n    return window.innerWidth - document.documentElement.clientWidth;\n  }\n};\n","/* global SmoothScroll */\n/* eslint-disable no-unused-vars, no-undef */\n\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  const scroll = new SmoothScroll(`a[href*=\"#\"]`, {\n    speed: 1000,\n    speedAsDuration: true\n  });\n\n  document.body.classList.remove(`page_no_js`);\n  document.body.classList.add(`page_js`);\n\n  const modals = document.querySelectorAll(`.modal`);\n\n  const keydownHandler = ({keyCode}) => {\n    if (keyCode === 27) {\n      if (modals) {\n        modals.forEach((modal) => {\n          if (!modal.classList.contains(`modal--invisible`)) {\n            helpers.modal.hide(modal);\n            helpers.scroll.enable();\n          }\n        });\n      }\n    }\n  };\n\n  document.addEventListener(`keydown`, keydownHandler);\n});\n","document.addEventListener(`DOMContentLoaded`, () => {\n  const trigger = document.querySelector(`.main-nav__trigger`);\n\n  const toggleMenu = (state, selector) => {\n    const nav = selector.closest(`.main-nav`).querySelector(`.main-nav-list`);\n\n    switch (state) {\n      case `close`:\n        selector.classList.remove(`main-nav__trigger--open-menu`);\n        selector.classList.add(`main-nav__trigger--close-menu`);\n        selector.setAttribute(`aria-label`, `Close menu`);\n        selector\n          .querySelector(`use`)\n          .setAttribute(`xlink:href`, `#main-nav__close`);\n        if (nav) {\n          nav.classList.remove(`main-nav-list--hidden`, `fadeOut`);\n          nav.classList.add(`animated`, `fadeIn`);\n        }\n        break;\n      case `open`:\n        selector.classList.remove(`main-nav__trigger--close-menu`);\n        selector.classList.add(`main-nav__trigger--open-menu`);\n\n        selector.setAttribute(`aria-label`, `Open menu`);\n        selector\n          .querySelector(`use`)\n          .setAttribute(`xlink:href`, `#main-nav__menu`);\n        if (nav) {\n          nav.classList.add(`main-nav-list--hidden`, `fadeOut`);\n          nav.classList.remove(`main-nav-list--hidden`, `fadeIn`);\n        }\n        break;\n      default:\n        throw new Error(`Unknown state: ${state}`);\n    }\n  };\n\n  const clickHandler = ({currentTarget}) => {\n    if (currentTarget.classList.contains(`main-nav__trigger--open-menu`)) {\n      toggleMenu(`close`, currentTarget);\n    } else if (\n      currentTarget.classList.contains(`main-nav__trigger--close-menu`)\n    ) {\n      toggleMenu(`open`, currentTarget);\n    }\n  };\n\n  if (trigger) {\n    trigger.addEventListener(`click`, clickHandler);\n  }\n\n  [`click`, `keydown`].forEach((event) => {\n    document.addEventListener(event, (e) => {\n      const {type, target} = e;\n      if (type === `click`) {\n        if (!target.closest(`.main-nav`)) {\n          toggleMenu(`open`, document.querySelector(`.main-nav__trigger`));\n        }\n      }\n      if (type === `keydown` && e.keyCode === 27) {\n        toggleMenu(`open`, document.querySelector(`.main-nav__trigger`));\n      }\n    });\n  });\n});\n","/* eslint-disable no-undef */\n\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  const pageHeaderLogin = document.querySelector(`#page-header-login`);\n\n  const clickHandler = ({target}) => {\n    const form = document.querySelector(`#${target.dataset.modal} form`);\n    let formSubmit = null;\n    let formLogin = null;\n\n    if (form) {\n      formSubmit = form.querySelector(`[type=\"submit\"]`);\n      formLogin = form.elements.login;\n    }\n\n    const modal = document.getElementById(target.dataset.modal);\n\n    if (modal) {\n      helpers.modal.show(modal);\n      helpers.scroll.disable();\n    }\n\n    if (localStorage.getItem(`loginFormData`)) {\n      if (formSubmit) {\n        formSubmit.focus();\n      }\n    } else {\n      if (formLogin) {\n        formLogin.focus();\n      }\n    }\n  };\n\n  if (pageHeaderLogin) {\n    pageHeaderLogin.addEventListener(`click`, clickHandler);\n  }\n});\n","/* global Swiper */\n/* eslint-disable no-unused-vars */\n\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  const mainSlider = new Swiper(`.about`, {\n    loop: true,\n    speed: 500,\n    spaceBetween: 30,\n    noSwiping: false,\n    autoplay: {\n      delay: 3000\n    },\n    pagination: {\n      el: `.swiper-pagination`,\n      type: `bullets`,\n      clickable: `false`\n    },\n    breakpoints: {\n      1024: {\n        noSwiping: true,\n        pagination: {\n          el: `.swiper-pagination`,\n          type: `bullets`,\n          clickable: true\n        },\n        autoplay: {\n          delay: 4000\n        }\n      }\n    }\n  });\n});\n","/* global Swiper */\n/* eslint-disable no-unused-vars */\n\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  // tab' switch behaviour\n  const servicesListItems = document.querySelectorAll(\n      `#services .services__list-item`\n  );\n  const servicesLinks = document.querySelectorAll(`#services .services__link`);\n  const servicesTabs = document.querySelectorAll(`#services .tab-services`);\n\n  if (servicesLinks && servicesTabs) {\n    const eventHandler = (event, activeElement, activeElementIndex) => {\n      const {type, keyCode} = event;\n\n      if (type === `click`) {\n        event.preventDefault();\n        removeActiveTab();\n        addActiveTab(activeElement, activeElementIndex);\n      } else if (type === `keyup` && keyCode === 9) {\n        removeActiveTab();\n        addActiveTab(activeElement, activeElementIndex);\n      }\n    };\n\n    [`click`, `keyup`].forEach((eventName) => {\n      servicesLinks.forEach((link, linkIndex) => {\n        link.addEventListener(eventName, (e) => eventHandler(e, link, linkIndex));\n      });\n    });\n\n    const removeActiveTab = () => {\n      servicesLinks.forEach((link) => {\n        link\n          .closest(`.services__list-item`)\n          .classList.remove(`services__list-item--active`);\n      });\n      servicesTabs.forEach((section) => {\n        section.classList.remove(`tab-services--active`);\n      });\n    };\n\n    const addActiveTab = (link, linkIndex) => {\n      link\n        .closest(`.services__list-item`)\n        .classList.add(`services__list-item--active`);\n      const tabIndex = Array.from(servicesTabs).findIndex(\n          (tab, index) => index === linkIndex\n      );\n      servicesTabs.forEach((tab, index) => {\n        if (index === tabIndex) {\n          tab.classList.add(`tab-services--active`);\n        }\n      });\n    };\n  }\n\n  // slider\n  const breakpoint = window.matchMedia(`only screen and (max-width: 1023px)`);\n  let servicesSlider = null;\n\n  const enableSlider = () => {\n    servicesSlider = new Swiper(`#services`, {\n      loop: true,\n      speed: 500,\n      spaceBetween: 10,\n      autoplay: {\n        delay: 3000\n      },\n      pagination: {\n        el: `.swiper-pagination`,\n        type: `bullets`,\n        clickable: `false`\n      }\n    });\n  };\n\n  const removeActveClass = (list, cls) => {\n    list.forEach((item) =>\n      item.classList.contains(`${cls}`)\n        ? item.classList.remove(`${cls}`)\n        : item\n    );\n  };\n\n  const makeFirstElementActive = (list, cls) => {\n    list.forEach((item, index) =>\n      index === 0\n        ? item.classList.add(`${cls}`)\n        : item.classList.remove(`${cls}`)\n    );\n  };\n\n  const breakpointChecker = () => {\n    if (breakpoint.matches) {\n      enableSlider();\n      if (servicesTabs && servicesListItems) {\n        removeActveClass(servicesTabs, `tab-service--active`);\n        removeActveClass(servicesListItems, `services__list-item--active`);\n      }\n    } else {\n      if (servicesSlider) {\n        servicesSlider.destroy();\n\n        if (servicesTabs && servicesListItems) {\n          makeFirstElementActive(servicesTabs, `tab-service--active`);\n          makeFirstElementActive(servicesListItems, `services__list-item--active`);\n        }\n      }\n    }\n  };\n\n  breakpointChecker();\n  breakpoint.addListener(breakpointChecker);\n});\n","/* global Map, IMask */\n/* eslint-disable no-unused-vars, no-undef, new-cap, max-nested-callbacks */\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  const calculator = document.querySelector(`#calculator`);\n\n  let creditSelectionForm = null;\n  let creditSelectionTitle = null;\n  let creditSelectionFormField = null;\n\n  let creditCalculationForms = null;\n  let creditOfferingForm = null;\n  let creditRegistrationForm = null;\n\n  let messages = null;\n  let rejectMessage = null;\n  let errorMessage = null;\n\n  if (calculator) {\n    creditSelectionForm = calculator.querySelector(`#credit-selection`);\n    if (creditSelectionForm) {\n      creditSelectionTitle = creditSelectionForm.querySelector(`input`);\n      creditSelectionFormField = creditSelectionForm.querySelector(\n          `.calculator__form-field`\n      );\n    }\n\n    creditCalculationForms = calculator.querySelectorAll(\n        `.calculator__credit-form--calculation form`\n    );\n    creditOfferingForm = calculator.querySelector(`#credit-offer`);\n    creditRegistrationForm = calculator.querySelector(`#credit-registration`);\n\n    messages = calculator.querySelectorAll(`.calculator__message`);\n    if (messages) {\n      [rejectMessage] = Array.from(messages).filter((item) => {\n        if (item.classList.contains(`calculator__message--reject`)) {\n          return item;\n        }\n        return false;\n      });\n      [errorMessage] = Array.from(messages).filter((item) => {\n        if (item.classList.contains(`calculator__message--error`)) {\n          return item;\n        }\n        return false;\n      });\n    }\n  }\n\n  const toggleFocus = (element, parentElement, selector) => {\n    element.addEventListener(`focus`, () => {\n      if (!parentElement.classList.contains(`${selector}--focus`)) {\n        parentElement.classList.add(`${selector}--focus`);\n      }\n    });\n\n    element.addEventListener(`blur`, () => {\n      if (parentElement.classList.contains(`${selector}--focus`)) {\n        parentElement.classList.remove(`${selector}--focus`);\n      }\n    });\n  };\n\n  const triggerClick = (element) => {\n    element.addEventListener(`keydown`, (event) => {\n      const {keyCode, target} = event;\n      if (keyCode === 13 || keyCode === 32) {\n        target.click();\n      }\n    });\n  };\n\n  // маски\n  const getUnitPluralForm = (unit, value) => {\n    switch (unit) {\n      case `currency`:\n        unit = ` ${helpers.num2str(Number(value), nounRublePlurals)}`;\n        break;\n\n      case `percent`:\n        unit = `%`;\n        break;\n\n      case `numero-sign`:\n        unit = `№`;\n        break;\n\n      case `period`:\n        unit = ` ${helpers.num2str(Number(value), nounYearPlurals)}`;\n        break;\n\n      case `empty`:\n        unit = ``;\n        break;\n\n      default:\n        throw new Error(`Unknown unit: ${unit}`);\n    }\n    return unit;\n  };\n\n  const getMaskOptions = (unit, format) => {\n    switch (format) {\n      case `integer`:\n        return {\n          mask: `VALUE${unit}`,\n          lazy: false,\n          blocks: {\n            VALUE: {\n              mask: Number,\n              scale: 0,\n              signed: false,\n              thousandsSeparator: ` `\n            }\n          }\n        };\n      case `4-digit integer`:\n        return {\n          mask: `${unit} VALUE`,\n          blocks: {\n            VALUE: {\n              mask: /^\\d+$/,\n              commit: (value, masked) =>\n                (masked._value = value.padStart(4, `0`))\n            }\n          }\n        };\n      case `fractional`:\n        return {\n          mask: `VALUE${unit}`,\n          lazy: false,\n          blocks: {\n            VALUE: {\n              mask: Number,\n              scale: 2,\n              signed: false,\n              padFractionalZeros: true,\n              radix: `,`\n            }\n          }\n        };\n      case `string`:\n        return {\n          mask: `VALUE`,\n          blocks: {\n            VALUE: {\n              mask: String\n            }\n          }\n        };\n      case `tel`:\n        return {\n          mask: `+{7}(000)000-00-00`,\n          lazy: true\n        };\n      case `full-name`:\n        return {\n          mask: /^[a-zA-Zа-яА-ЯёЁ ]+$/\n        };\n      case `email`:\n        return {\n          mask: /^\\S*@?\\S*$/\n        };\n      default:\n        throw new Error(`Unknown mask's format: ${format}`);\n    }\n  };\n\n  // склонение числительных окончаний слов\n  const nounRublePlurals = [`рубль`, `рубля`, `рублей`];\n  const nounYearPlurals = [`год`, `года`, `лет`];\n\n  // Шаг 1 (Цель кредита)\n  if (creditSelectionFormField) {\n    creditSelectionFormField.addEventListener(`click`, (evt) => {\n      event.stopPropagation();\n      const {currentTarget} = evt;\n      currentTarget.classList.toggle(`calculator__form-field--open`);\n\n      document.addEventListener(`click`, (event) => {\n        event.stopImmediatePropagation();\n        const rect = currentTarget.getBoundingClientRect();\n        const isInFormField =\n          rect.top <= event.clientY &&\n          event.clientY <= rect.top + rect.height &&\n          rect.left <= event.clientX &&\n          event.clientX <= rect.left + rect.width;\n        if (!isInFormField) {\n          if (\n            currentTarget.classList.contains(`calculator__form-field--open`)\n          ) {\n            currentTarget.classList.remove(`calculator__form-field--open`);\n          }\n        }\n      });\n    });\n  }\n\n  if (creditSelectionForm) {\n    const calculatorCols =\n      calculator && calculator.querySelectorAll(`.calculator__col`);\n    const toggleCalculatorColVisibility = () => {\n      calculatorCols.forEach((col) => {\n        if (\n          col.classList.contains(`calculator__col--right`) &&\n          col.classList.contains(`calculator__col--invisible`)\n        ) {\n          col.classList.remove(`calculator__col--invisible`);\n        }\n      });\n    };\n\n    creditSelectionForm\n      .querySelectorAll(`.calculator__forms-list-item`)\n      .forEach((item) => {\n        item.addEventListener(`click`, (event) => {\n          const {target} = event;\n          if (creditCalculationForms) {\n            creditCalculationForms.forEach((form) => {\n              if (form.name !== target.dataset.creditType) {\n                form.hidden = true;\n              } else {\n                form.hidden = false;\n                toggleCalculatorColVisibility();\n                form.dispatchEvent(new Event(`change`));\n              }\n            });\n          }\n          if (creditRegistrationForm) {\n            creditRegistrationForm.hidden = true;\n          }\n          if (creditSelectionTitle) {\n            creditSelectionTitle.value = target.textContent;\n            creditSelectionTitle.parentElement.classList.remove(\n                `calculator__form-field--open`\n            );\n          }\n        });\n        toggleFocus(\n            item,\n            item.parentElement.previousElementSibling,\n            `calculator__form-field`\n        );\n        triggerClick(item);\n      });\n  }\n\n  // Шаг 2 (параметры кредита)\n  const makeInactive = (list) => {\n    list.forEach((item) => {\n      item.value = `0`;\n      item.el.input.disabled = true;\n    });\n  };\n\n  const makeActive = (list) =>\n    list.forEach((item) => (item.el.input.disabled = false));\n\n  const masks = [];\n  if (creditCalculationForms) {\n    creditCalculationForms.forEach((form) => {\n      const inputs = form.querySelectorAll(\n          `input[type=\"text\"], input[type=\"range\"]`\n      );\n      const buttons = form.querySelectorAll(`button`);\n      if (inputs) {\n        inputs.forEach((input) => {\n          const unit = getUnitPluralForm(input.dataset.unit, input.value);\n          masks.push(IMask(input, getMaskOptions(unit, input.dataset.format)));\n        });\n      }\n\n      if (buttons) {\n        buttons.forEach((button) => {\n          button.addEventListener(`click`, (event) => {\n            const {target} = event;\n            const formField = target.closest(`.calculator__form-field`);\n            const {name} = target;\n            const mask = masks.find(\n                (item) => item.el.input.id === formField.querySelector(`input`).id\n            );\n            const {\n              dataset: {min = ``, max = ``, step = ``, unit = ``, format = ``}\n            } = mask.el.input;\n\n            if (Number.isNaN(Number(mask.unmaskedValue))) {\n              const maskUnit = getUnitPluralForm(unit, mask.unmaskedValue);\n              mask.updateOptions(getMaskOptions(maskUnit, format));\n              mask.value = `${Number(min)}`;\n              mask.el.input.dispatchEvent(\n                  new Event(`change`, {bubbles: true})\n              );\n              if (\n                formField &&\n                formField.classList.contains(`calculator__form-field--invalid`)\n              ) {\n                formField.classList.remove(`calculator__form-field--invalid`);\n              }\n            } else {\n              let maskedInputNewValue = 0;\n              if (name === `plus`) {\n                maskedInputNewValue = Number(mask.unmaskedValue) + Number(step);\n                if (maskedInputNewValue > Number(max)) {\n                  maskedInputNewValue = `${Number(max)}`;\n                }\n              } else if (name === `minus`) {\n                maskedInputNewValue = Number(mask.unmaskedValue) - Number(step);\n                if (maskedInputNewValue < Number(min)) {\n                  maskedInputNewValue = `${Number(min)}`;\n                }\n              }\n              mask.value = `${maskedInputNewValue}`;\n              mask.el.input.dispatchEvent(\n                  new Event(`change`, {bubbles: true})\n              );\n            }\n          });\n        });\n      }\n\n      form\n        .querySelectorAll(\n            `.calculator__form-field > button, .calculator__form-field > input`\n        )\n        .forEach((item) => {\n          toggleFocus(item, item.parentElement, `calculator__form-field`);\n        });\n\n      form.querySelectorAll(`label`).forEach((label) => triggerClick(label));\n    });\n  }\n\n  masks.forEach((mask) => {\n    const input = mask.el.input;\n    const formField = input.closest(`.calculator__form-field`);\n    let buttons = null;\n    if (formField) {\n      buttons = formField.querySelectorAll(`button`);\n    }\n\n    const focusHandler = () => {\n      if (\n        formField &&\n        formField.classList.contains(`calculator__form-field--invalid`)\n      ) {\n        formField.classList.remove(`calculator__form-field--invalid`);\n      }\n    };\n\n    const creditCalculationFormInputHandler = () => {\n      const maskUnit = getUnitPluralForm(\n          input.dataset.unit,\n          mask.unmaskedValue\n      );\n      mask.updateOptions(getMaskOptions(maskUnit, input.dataset.format));\n    };\n\n    const creditCalculationFormChangeHandler = ({target}) => {\n      const {\n        dataset: {min = ``, max = ``, step = ``, unit = ``, format = ``}\n      } = target;\n      const divider = `-credit-`;\n      const [formModifier, fieldModifier] = target.name.split(`${divider}`);\n\n      const [cost] = masks.filter(\n          (item) => item.el.input.name === `${formModifier}${divider}cost`\n      );\n\n      const [initialPayment] = masks.filter(\n          (item) =>\n            item.el.input.name === `${formModifier}${divider}initial-payment`\n      );\n      const [initialPaymentRange] = masks.filter(\n          (item) =>\n            item.el.input.name ===\n          `${formModifier}${divider}initial-payment-range`\n      );\n      const initialPaymentPercent = document.querySelector(\n          `#${formModifier}${divider}initial-payment-percent`\n      );\n\n      const [period] = masks.filter(\n          (item) => item.el.input.name === `${formModifier}${divider}period`\n      );\n      const [periodRange] = masks.filter(\n          (item) => item.el.input.name === `${formModifier}${divider}period-range`\n      );\n\n      let maskUnit = ``;\n\n      switch (fieldModifier) {\n        case `cost`:\n          if (\n            Number(mask.unmaskedValue) < Number(min) ||\n            Number(mask.unmaskedValue) > Number(max)\n          ) {\n            mask.updateOptions(getMaskOptions(``, `string`));\n            mask.value = `Некорректное значение`;\n            if (initialPayment) {\n              initialPayment.value = `0`;\n            }\n            if (\n              formField &&\n              !formField.classList.contains(`calculator__form-field--invalid`)\n            ) {\n              formField.classList.add(`calculator__form-field--invalid`);\n            }\n\n            if (initialPayment && initialPaymentRange) {\n              makeInactive([initialPayment, initialPaymentRange]);\n            }\n          } else {\n            if (initialPayment) {\n              initialPayment.value = `${Number(cost.unmaskedValue) *\n                (Number(initialPayment.el.input.dataset.min) / 100)}`;\n\n              if (initialPaymentRange) {\n                initialPaymentRange.value = `${Number(\n                    initialPaymentRange.el.input.min\n                )}`;\n              }\n            }\n\n            if (buttons) {\n              buttons.forEach((button) => (button.disabled = false));\n            }\n            if (initialPayment && initialPaymentRange) {\n              makeActive([initialPayment, initialPaymentRange]);\n            }\n          }\n          break;\n\n        case `initial-payment`:\n          if (Number(mask.unmaskedValue) >= Number(cost.unmaskedValue)) {\n            mask.value = `${Number(cost.unmaskedValue)}`;\n            if (initialPaymentRange) {\n              initialPaymentRange.value = `${max}`;\n            }\n          } else if (\n            helpers.getPercentage(Number(mask.unmaskedValue), cost.unmaskedValue) <\n            Number(min)\n          ) {\n            mask.value = `${Number(cost.unmaskedValue) / Number(min)}`;\n            if (initialPaymentRange) {\n              initialPaymentRange.value = `${min}`;\n            }\n          }\n\n          if (initialPaymentRange) {\n            initialPaymentRange.value = `${helpers.round(\n                helpers.getPercentage(\n                    Number(mask.unmaskedValue),\n                    Number(cost.unmaskedValue)\n                ),\n                Number(step)\n            )}`;\n          }\n\n          maskUnit = getUnitPluralForm(unit, mask.unmaskedValue);\n          mask.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n\n        case `initial-payment-range`:\n          if (initialPayment) {\n            initialPayment.value = `${Number(cost.unmaskedValue) *\n              (Number(mask.unmaskedValue) / 100)}`;\n            initialPayment.el.input.dispatchEvent(\n                new Event(`change`, {bubbles: true})\n            );\n            if (initialPaymentPercent) {\n              initialPaymentPercent.textContent = `${Number(\n                  mask.unmaskedValue\n              )}%`;\n            }\n          }\n          break;\n\n        case `period`:\n          if (Number(mask.unmaskedValue) > Number(max)) {\n            mask.value = `${Number(max)}`;\n            mask.updateOptions(getMaskOptions(mask, format));\n            if (periodRange) {\n              periodRange.value = `${max}`;\n            }\n          } else if (Number(mask.unmaskedValue) < Number(min)) {\n            mask.value = `${Number(min)}`;\n            mask.updateOptions(getMaskOptions(unit, format));\n            if (periodRange) {\n              periodRange.value = `${min}`;\n            }\n          }\n\n          if (periodRange) {\n            periodRange.value = `${helpers.round(\n                Number(mask.unmaskedValue),\n                Number(step)\n            )}`;\n          }\n          maskUnit = getUnitPluralForm(unit, mask.unmaskedValue);\n          mask.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n\n        case `period-range`:\n          if (period) {\n            period.value = `${Number(mask.unmaskedValue)}`;\n            period.el.input.dispatchEvent(\n                new Event(`change`, {bubbles: true})\n            );\n          }\n          break;\n\n        default:\n          throw new Error(`Unknown field's modifier: ${fieldModifier}`);\n      }\n      if (creditRegistrationForm) {\n        if (!creditRegistrationForm.hidden) {\n          creditRegistrationForm.hidden = true;\n        }\n      }\n    };\n\n    input.addEventListener(`input`, creditCalculationFormInputHandler);\n    input.addEventListener(`change`, creditCalculationFormChangeHandler);\n    input.addEventListener(`focus`, focusHandler);\n  });\n\n  // Секция «Наше предложение»\n  const calcAnnuityPayment = (creditSum, monthlyInterestRate, periods) =>\n    Math.ceil(\n        creditSum *\n        (monthlyInterestRate /\n          (1 - (1 + monthlyInterestRate) ** (Math.abs(periods) * -1)))\n    );\n  const calcRequiredIncome = (monthlyPayment) =>\n    Math.ceil((monthlyPayment / 45) * 100);\n  const calcMonthlyInterestRate = (interestRate) =>\n    Number((interestRate / 100 / 12).toFixed(5));\n  const calcPeriods = (period) => period * 12;\n\n  const toggleMessage = (type, currentValue, minValue) => {\n    const creditSumMinThreshold = 200000;\n    const modifiers = new Map([\n      [`mortgage`, `ипотечные`],\n      [`auto`, `автомобильные`],\n      [`personal`, `потребительские`]\n    ]);\n    if (currentValue < minValue) {\n      const messageData = rejectMessage.querySelectorAll(`span`);\n      const [modifier, value] = messageData;\n      modifier.textContent = modifiers.get(`${type}`);\n      value.textContent = `${minValue\n        .toLocaleString(`en-US`)\n        .replace(/,/g, ` `)} ${helpers.num2str(minValue, nounRublePlurals)}`;\n      rejectMessage.classList.remove(`calculator__message--invisible`);\n      creditOfferingForm.hidden = true;\n    } else {\n      rejectMessage.classList.add(`calculator__message--invisible`);\n      creditOfferingForm.hidden = false;\n    }\n\n    if (Number.isNaN(currentValue)) {\n      errorMessage.classList.remove(`calculator__message--invisible`);\n      creditOfferingForm.hidden = true;\n    } else {\n      errorMessage.classList.add(`calculator__message--invisible`);\n    }\n  };\n\n  const creditTypeNames = new Map([\n    [`mortgage`, `Сумма ипотеки`],\n    [`auto`, `Сумма автокредита`],\n    [`period`, `Сумма кредита`]\n  ]);\n\n  if (creditOfferingForm) {\n    const inputs = creditOfferingForm.querySelectorAll(`input`);\n    if (inputs) {\n      inputs.forEach((input) => {\n        const unit = getUnitPluralForm(input.dataset.unit, input.value);\n        masks.push(IMask(input, getMaskOptions(unit, input.dataset.format)));\n      });\n    }\n    creditOfferingForm\n      .querySelector(`button`)\n      .addEventListener(`click`, (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        creditRegistrationForm.hidden = false;\n      });\n  }\n\n  const fillInCreditOfferingForm = (elements, data) => {\n    const {creditSum, interestRate, annuityPayment, requiredIncome} = data;\n    elements.forEach((element) => {\n      const divider = `-offer-`;\n      const {unit, format} = element.el.input.dataset;\n      const {name} = element.el.input;\n      const [, fieldName] = name.split(`${divider}`);\n      let maskUnit = ``;\n      switch (fieldName) {\n        case `credit-sum`:\n          element.value = `${creditSum}`;\n          maskUnit = getUnitPluralForm(unit, element.unmaskedValue);\n          element.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n        case `interest-rate`:\n          element.value = `${interestRate}`;\n          maskUnit = getUnitPluralForm(unit, element.unmaskedValue);\n          element.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n        case `annuity-payment`:\n          element.value = `${annuityPayment}`;\n          maskUnit = getUnitPluralForm(unit, element.unmaskedValue);\n          element.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n        case `required-income`:\n          element.value = `${requiredIncome}`;\n          maskUnit = getUnitPluralForm(unit, element.unmaskedValue);\n          element.updateOptions(getMaskOptions(maskUnit, format));\n          break;\n\n        default:\n          throw new Error(`Unknown field's name: ${name}`);\n      }\n    });\n  };\n\n  const renderCreditOfferingFormData = ({currentTarget}) => {\n    const divider = `-credit-`;\n    const [, formModifier] = currentTarget.name.split(`-`);\n\n    const [cost] = masks.filter((mask) => {\n      return mask.el.input.name === `${formModifier}${divider}cost`;\n    });\n    const [initialPayment] = masks.filter(\n        (mask) => mask.el.input.name === `${formModifier}${divider}initial-payment`\n    );\n    const [period] = masks.filter(\n        (mask) => mask.el.input.name === `${formModifier}${divider}period`\n    );\n\n    if (creditOfferingForm) {\n      creditOfferingForm.querySelector(\n          `label[for=\"credit-offer-credit-sum\"]`\n      ).textContent = creditTypeNames.get(`${formModifier}`);\n    }\n\n    let periods = calcPeriods(Number(period.unmaskedValue));\n    const filteredMasks = Array.from(masks).filter((mask) =>\n      mask.el.input.name.includes(`offer`)\n    );\n\n    if (cost && period) {\n      switch (formModifier) {\n        case `mortgage`:\n          const [maternityCapital] = Array.from(currentTarget.elements).filter(\n              (element) =>\n                element.name === `${formModifier}${divider}maternity-capital`\n          );\n\n          if (initialPayment && maternityCapital) {\n            const maternityCapitalSum = maternityCapital.checked ? 470000 : 0;\n            const creditSum =\n              Number(cost.unmaskedValue) -\n              Number(initialPayment.unmaskedValue) -\n              maternityCapitalSum;\n\n            const percentage = helpers.getPercentage(\n                Number(initialPayment.unmaskedValue),\n                Number(cost.unmaskedValue)\n            );\n            const percentageRateThreshold = 15;\n            let interestRate = 0;\n\n            if (percentage < percentageRateThreshold) {\n              interestRate = 9.4;\n            } else if (percentage >= percentageRateThreshold) {\n              interestRate = 8.5;\n            }\n            const monthlyInterestRate = calcMonthlyInterestRate(interestRate);\n            const annuityPayment = calcAnnuityPayment(\n                creditSum,\n                monthlyInterestRate,\n                periods\n            );\n            const requiredIncome = calcRequiredIncome(annuityPayment);\n\n            toggleMessage(formModifier, creditSum, 500000);\n\n            fillInCreditOfferingForm(filteredMasks, {\n              creditSum,\n              interestRate,\n              annuityPayment,\n              requiredIncome\n            });\n          }\n          break;\n\n        case `auto`:\n          const [carInsurance] = Array.from(currentTarget.elements).filter(\n              (element) => element.name === `${formModifier}${divider}car-insurance`\n          );\n          const [lifeInsurance] = Array.from(currentTarget.elements).filter(\n              (element) =>\n                element.name === `${formModifier}${divider}life-insurance`\n          );\n\n          if (initialPayment && carInsurance && lifeInsurance) {\n            const creditSum =\n              Number(cost.unmaskedValue) - Number(initialPayment.unmaskedValue);\n\n            let costThreshold = 2000000;\n            let interestRate = 0;\n            if (Number(cost.unmaskedValue) < costThreshold) {\n              interestRate = 16;\n            } else if (Number(cost.unmaskedValue) > costThreshold) {\n              interestRate = 15;\n            }\n\n            if (carInsurance.checked || lifeInsurance.checked) {\n              interestRate = 8.5;\n            }\n\n            if (carInsurance.checked && lifeInsurance.checked) {\n              interestRate = 3.5;\n            }\n\n            const monthlyInterestRate = calcMonthlyInterestRate(interestRate);\n            const annuityPayment = calcAnnuityPayment(\n                creditSum,\n                monthlyInterestRate,\n                periods\n            );\n            const requiredIncome = calcRequiredIncome(annuityPayment);\n\n            toggleMessage(formModifier, creditSum, 200000);\n\n            fillInCreditOfferingForm(filteredMasks, {\n              creditSum,\n              interestRate,\n              annuityPayment,\n              requiredIncome\n            });\n          }\n          break;\n\n        case `personal`:\n          const [projectMember] = Array.from(currentTarget.elements).filter(\n              (element) =>\n                element.name === `${formModifier}${divider}project-member`\n          );\n\n          if (projectMember) {\n            const creditSum = Number(cost.unmaskedValue);\n            const projectMemberPercentage = projectMember.checked ? 0.5 : 0;\n            const personalMinThreshold = 750000;\n            const personalMaxThreshold = 2000000;\n            let interestRate = 0;\n\n            if (Number(cost.unmaskedValue) < personalMinThreshold) {\n              interestRate = 15 - projectMemberPercentage;\n            } else if (\n              Number(cost.unmaskedValue) <= personalMinThreshold &&\n              Number(cost.unmaskedValue) < personalMaxThreshold\n            ) {\n              interestRate = 12.5 - projectMemberPercentage;\n            } else if (Number(cost.unmaskedValue) > personalMaxThreshold) {\n              interestRate = 9.5 - projectMemberPercentage;\n            }\n\n            const monthlyInterestRate = calcMonthlyInterestRate(interestRate);\n            const annuityPayment = calcAnnuityPayment(\n                creditSum,\n                monthlyInterestRate,\n                periods\n            );\n            const requiredIncome = calcRequiredIncome(annuityPayment);\n\n            toggleMessage(formModifier, creditSum, 0);\n\n            fillInCreditOfferingForm(filteredMasks, {\n              creditSum,\n              interestRate,\n              annuityPayment,\n              requiredIncome\n            });\n          }\n          break;\n\n        default:\n          throw new Error(`Unknown form's modifier: ${formModifier}`);\n      }\n    }\n  };\n\n  // Шаг 3 (оформление заявки)\n  if (creditRegistrationForm) {\n    const formRegistrationName = creditRegistrationForm.name;\n    const inputs = creditRegistrationForm.querySelectorAll(`input`);\n\n    if (inputs) {\n      inputs.forEach((input) => {\n        const unit = getUnitPluralForm(input.dataset.unit, input.value);\n        masks.push(IMask(input, getMaskOptions(unit, input.dataset.format)));\n      });\n    }\n\n    const [creditRegistrationFullNameInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-full-name`;\n    });\n\n    const [creditRegistrationEmailInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-email`;\n    });\n\n    const [creditRegistrationTelInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-tel`;\n    });\n\n    const [formRegistrationApplicationNumber] = masks.filter((mask) => {\n      return (\n        mask.el.input.name === `${formRegistrationName}-application-number`\n      );\n    });\n\n    const registrationFormData = localStorage.getItem(`registrationFormData`)\n      ? JSON.parse(localStorage.getItem(`registrationFormData`))\n      : {\n        fullName: ``,\n        tel: ``,\n        email: ``\n      };\n    const {fullName, tel, email} = registrationFormData;\n\n    if (creditRegistrationFullNameInput) {\n      creditRegistrationFullNameInput.value = fullName;\n    }\n\n    if (creditRegistrationEmailInput) {\n      creditRegistrationEmailInput.value = email;\n    }\n\n    if (creditRegistrationTelInput) {\n      creditRegistrationTelInput.value = tel;\n    }\n\n    if (formRegistrationApplicationNumber) {\n      formRegistrationApplicationNumber.value = `1`;\n    }\n  }\n\n  const renderCreditRegistrationFormData = ({currentTarget}) => {\n    const updateMask = (mask) => {\n      const {unit, format} = mask.el.input.dataset;\n      const maskUnit = getUnitPluralForm(unit, mask.unmaskedValue);\n      mask.updateOptions(getMaskOptions(maskUnit, format));\n    };\n    // поля формы с параметрами кредита\n    const divider = `-credit-`;\n    const [, formCalculationModifier] = currentTarget.name.split(`-`);\n\n    const [creditRegistrationCostMask] = masks.filter((mask) => {\n      return mask.el.input.name === `${formCalculationModifier}${divider}cost`;\n    });\n    const [creditRegistrationInitialPaymentMask] = masks.filter(\n        (mask) =>\n          mask.el.input.name ===\n        `${formCalculationModifier}${divider}initial-payment`\n    );\n    const [creditRegistrationPeriodMask] = masks.filter(\n        (mask) =>\n          mask.el.input.name === `${formCalculationModifier}${divider}period`\n    );\n\n    // поля формы оформления заявки\n    const formRegistrationName =\n      creditRegistrationForm && creditRegistrationForm.name;\n\n    const [formRegistrationPurposeInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-purpose`;\n    });\n\n    const formRegistrationCostLabel =\n      creditRegistrationForm &&\n      creditRegistrationForm.querySelector(`[for=\"credit-registration-cost\"]`);\n    const [costInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-cost`;\n    });\n\n    const [formRegistrationInitialPaymentInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-initial-payment`;\n    });\n    const creditRegistrationInitialPaymentGroup =\n      creditRegistrationForm &&\n      creditRegistrationForm\n        .querySelector(`input[name=\"${formRegistrationName}-initial-payment\"]`)\n        .closest(`.calculator__form-field`);\n\n    const [formRegistrationPeriodInput] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-period`;\n    });\n\n    switch (formCalculationModifier) {\n      case `mortgage`:\n        formRegistrationPurposeInput.value = `Ипотека`;\n        if (creditRegistrationCostMask) {\n          formRegistrationCostLabel.textContent = `Стоимость недвижимости`;\n        }\n        break;\n\n      case `auto`:\n        formRegistrationPurposeInput.value = `Автокредит`;\n        if (creditRegistrationCostMask) {\n          formRegistrationCostLabel.textContent = `Стоимость автомобиля`;\n        }\n        break;\n\n      case `personal`:\n        formRegistrationPurposeInput.value = `Потребительский кредит`;\n        if (creditRegistrationCostMask) {\n          formRegistrationCostLabel.textContent = `Сумма кредита`;\n        }\n        break;\n\n      default:\n        throw new Error(`Unknown modifier: ${formCalculationModifier}`);\n    }\n\n    if (creditRegistrationCostMask) {\n      costInput.value = creditRegistrationCostMask.unmaskedValue;\n      updateMask(costInput);\n    }\n    if (creditRegistrationInitialPaymentMask) {\n      formRegistrationInitialPaymentInput.value =\n        creditRegistrationInitialPaymentMask.unmaskedValue;\n      creditRegistrationInitialPaymentGroup.classList.remove(\n          `calculator__form-field--invisible`\n      );\n      updateMask(formRegistrationInitialPaymentInput);\n    } else {\n      creditRegistrationInitialPaymentGroup.classList.add(\n          `calculator__form-field--invisible`\n      );\n    }\n\n    if (creditRegistrationPeriodMask) {\n      formRegistrationPeriodInput.value =\n        creditRegistrationPeriodMask.unmaskedValue;\n      updateMask(formRegistrationPeriodInput);\n    }\n  };\n\n  if (creditCalculationForms) {\n    creditCalculationForms.forEach((form) => {\n      form.addEventListener(`change`, renderCreditOfferingFormData);\n      form.addEventListener(`change`, renderCreditRegistrationFormData);\n    });\n  }\n\n  if (creditRegistrationForm) {\n    const formRegistrationName = creditRegistrationForm.name;\n\n    const [fullName] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-full-name`;\n    });\n\n    const [tel] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-tel`;\n    });\n\n    const [email] = masks.filter((mask) => {\n      return mask.el.input.name === `${formRegistrationName}-email`;\n    });\n\n    const toggleInvalid = (element, state) => {\n      const parent = element.parentElement;\n      const [parentclassName] = parent.classList;\n      if (state === `valid`) {\n        if (\n          parent &&\n          parent.classList.contains(`${parentclassName}--invalid`)\n        ) {\n          parent.classList.remove(`${parentclassName}--invalid`);\n          parent.classList.remove(`animated`, `shake`);\n        }\n      } else if (state === `invalid`) {\n        if (\n          parent &&\n          !parent.classList.contains(`${parentclassName}--invalid`)\n        ) {\n          parent.classList.add(`${parentclassName}--invalid`);\n          parent.classList.add(`animated`, `shake`);\n        }\n      }\n    };\n\n    const creditRegistrationFormInvalidHandler = ({target}) => {\n      if (!target.validity.valid) {\n        toggleInvalid(target, `invalid`);\n      }\n    };\n\n    const creditRegistrationFormInputHandler = ({target}) => {\n      toggleInvalid(target, `valid`);\n    };\n\n    [fullName, email, tel].forEach((mask) => {\n      mask.el.input.addEventListener(\n          `invalid`,\n          creditRegistrationFormInvalidHandler\n      );\n      mask.el.input.addEventListener(\n          `input`,\n          creditRegistrationFormInputHandler\n      );\n    });\n\n    const submitHandler = (event) => {\n      event.preventDefault();\n      const {target} = event;\n      toggleInvalid(target, `valid`);\n      const modalCalculator = document.querySelector(`.modal--calculator`);\n      const [formRegistrationApplicationNumber] = masks.filter((mask) => {\n        return (\n          mask.el.input.name === `${formRegistrationName}-application-number`\n        );\n      });\n      const formData = Object.fromEntries(new FormData(target));\n\n      localStorage.setItem(\n          `registrationFormData`,\n          JSON.stringify({\n            fullName: formData[`${formRegistrationName}-full-name`],\n            email: formData[`${formRegistrationName}-email`],\n            tel: formData[`${formRegistrationName}-tel`]\n          })\n      );\n\n      if (formRegistrationApplicationNumber) {\n        formRegistrationApplicationNumber.unmaskedValue = `${Number(\n            formRegistrationApplicationNumber.unmaskedValue\n        ) + 1}`;\n      }\n\n      creditRegistrationForm.hidden = true;\n      if (modalCalculator) {\n        helpers.modal.show(modalCalculator);\n        helpers.scroll.disable();\n      }\n\n      if (creditCalculationForms) {\n        creditCalculationForms.forEach((form) => {\n          if (!form.hidden) {\n            form.hidden = !form.hidden;\n          }\n        });\n      }\n\n      if (creditOfferingForm) {\n        creditOfferingForm.hidden = true;\n      }\n    };\n\n    creditRegistrationForm.addEventListener(`submit`, submitHandler);\n  }\n});\n","/* global ymaps */\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  let map;\n  let objectManager;\n  const mapContainer = document.querySelector(`#map`);\n\n  const init = () => {\n    const departments =\n      mapContainer && JSON.parse(mapContainer.dataset.departments);\n    const russiaCoords = [61.698653, 99.505405];\n    map = new ymaps.Map(\n        mapContainer,\n        {\n          center: russiaCoords,\n          zoom: [9],\n          controls: []\n        },\n        {\n          autoFitToViewport: `always`\n        }\n    );\n\n    objectManager = new ymaps.ObjectManager({\n      clusterize: true,\n      gridSize: 32,\n      clusterDisableClickZoom: true\n    });\n\n    objectManager.objects.options.set({\n      iconLayout: `default#image`,\n      iconImageHref: `./static/departments/map_marker.svg`,\n      iconImageSize: [35, 40],\n      iconImageOffset: [-17, -20]\n    });\n\n    fetch(`./static/departments/departments.json`)\n      .then((response) => response.json())\n      .then((data) => {\n        objectManager.add(\n            (data[`features`] = data[`features`].filter((item) =>\n              departments.includes(item.group)\n            ))\n        );\n        map.geoObjects.add(objectManager);\n        const bounds = objectManager.getBounds();\n        if (bounds) {\n          map.setBounds(objectManager.getBounds());\n        }\n      });\n\n    map.behaviors.disable(`scrollZoom`);\n  };\n\n  const handleChange = ({currentTarget}) => {\n    const names = Array.from(currentTarget.elements.department)\n      .map((department) => {\n        if (department.checked) {\n          const [, name] = department.id.split(`-`);\n          return name;\n        }\n        return false;\n      })\n      .filter((name) => name);\n    if (mapContainer) {\n      mapContainer.dataset.departments = JSON.stringify(names);\n    }\n    if (map) {\n      map.destroy();\n    }\n    ymaps.ready(init);\n  };\n\n  document\n    .querySelector(`#departments-form`)\n    .addEventListener(`change`, handleChange);\n\n  window.addEventListener(`resize`, () => {\n    if (map && objectManager) {\n      map.setBounds(objectManager.getBounds());\n      map.container.fitToViewport();\n    }\n  });\n\n  ymaps.ready(init);\n});\n","document.addEventListener(`DOMContentLoaded`, () => {\n  const triggerClick = (element) => {\n    element.addEventListener(`keydown`, (event) => {\n      const {keyCode, target} = event;\n      if (keyCode === 13 || keyCode === 32) {\n        target.click();\n      }\n    });\n  };\n\n  document\n    .querySelectorAll(`form#departments-form label`)\n    .forEach((label) => triggerClick(label));\n});\n","/* global WatchJS */\n/* eslint-disable no-undef */\nconst {watch} = WatchJS;\n\ndocument.addEventListener(`DOMContentLoaded`, () => {\n  // Валидация формы модального окна (Паттерн «Обозреватель», MVC)\n  const modalPageHeader = document.querySelector(`#modal-page-header`);\n  const form = modalPageHeader.querySelector(`form`);\n  const fieldElements = {\n    login: form.querySelector(`.login-modal-form-field input`),\n    password: form.querySelector(`.password-modal-form-field input`)\n  };\n  const submitButton = form.querySelector(`button[type=\"submit\"]`);\n\n  const errorMessages = {\n    login: {\n      empty: `Обязательно к заполнению`\n    },\n    password: {\n      empty: `Обязательно к заполнению`,\n      length: `Минимальная длина пароля — 6 символов`\n    }\n  };\n\n  const validate = (fields, name) => {\n    const errors = {};\n    switch (name) {\n      case `login`:\n        if (!fields.login) {\n          errors.login = errorMessages.login.empty;\n        } else {\n          errors.login = ``;\n        }\n        break;\n      case `password`:\n        if (!fields.password) {\n          errors.password = errorMessages.password.empty;\n        } else if (fields.password.length < 6) {\n          errors.password = errorMessages.password.length;\n        } else {\n          errors.password = ``;\n        }\n        break;\n\n      default:\n        throw new Error(`Unknown field's name: ${name}`);\n    }\n    return {...state.form.errors, ...errors};\n  };\n\n  const updateStateErrors = (state, name) => {\n    const errors = validate(state.form.fields, name);\n    state.form.errors = errors;\n  };\n\n  const updateValidationState = (errors) => {\n    state.form.valid = Object.keys(errors).every((key) => {\n      return errors[key].length === 0;\n    });\n  };\n\n  const loginFormData = localStorage.getItem(`loginFormData`)\n    ? JSON.parse(localStorage.getItem(`loginFormData`))\n    : {login: ``, password: ``};\n\n  const {login, password} = loginFormData;\n\n  const state = {\n    form: {\n      processState: `filling`, // sending, finished\n      fields: {\n        login,\n        password\n      },\n      valid: true,\n      errors: {\n        login: ``,\n        password: ``\n      }\n    }\n  };\n\n  if (modalPageHeader && form) {\n    if (fieldElements[`login`] && fieldElements[`password`]) {\n      Object.entries(fieldElements).forEach(([name, element]) => {\n        element.value = state.form.fields[name];\n        element.addEventListener(`input`, (e) => {\n          state.form.fields[name] = e.target.value;\n          updateStateErrors(state, name);\n          updateValidationState(state.form.errors);\n        });\n      });\n\n      watch(state.form, `errors`, () => {\n        Object.entries(fieldElements).forEach(([name, element]) => {\n          const rootElementClassName = `${name}-modal-form-field`;\n          const rootElement = element.closest(`.${rootElementClassName}`);\n\n          if (rootElement) {\n            const feedbackElement = rootElement.querySelector(\n                `.${rootElementClassName}__feedback`\n            );\n            const errorMessage = state.form.errors[name];\n\n            if (\n              feedbackElement.querySelector(\n                  `.${rootElementClassName}__error-message`\n              )\n            ) {\n              rootElement.classList.remove(`${rootElementClassName}--invalid`);\n              feedbackElement.innerHTML = ``;\n            }\n\n            if (!errorMessage) {\n              return;\n            }\n            const errorMessageElement = document.createElement(`span`);\n            errorMessageElement.classList.add(\n                `${rootElementClassName}__error-message`\n            );\n            errorMessageElement.innerHTML = errorMessage;\n            feedbackElement.append(errorMessageElement);\n            rootElement.classList.add(`${rootElementClassName}--invalid`);\n          }\n        });\n      });\n    }\n\n    if (submitButton) {\n      watch(state.form, `processState`, () => {\n        const {processState} = state.form;\n        switch (processState) {\n          case `filling`:\n            submitButton.disabled = true;\n            break;\n          case `sending`:\n            submitButton.disabled = true;\n            break;\n          case `finished`:\n            modalPageHeader.classList.add(`modal--invisible`, `fadeOut`);\n            modalPageHeader.classList.remove(`fadeIn`);\n            document.body.style.cssText = `background-color: '', padding-right: '';`;\n            document.body.classList.remove(`page--overlay`, `page--no-scroll`);\n            break;\n          default:\n            throw new Error(`Unknown state: ${processState}`);\n        }\n      });\n\n      watch(state.form, `valid`, () => {\n        submitButton.disabled = !state.form.valid;\n      });\n    }\n\n    form.addEventListener(`submit`, (event) => {\n      event.preventDefault();\n      const {target} = event;\n      state.form.processState = `sending`;\n      const formData = new FormData(target);\n      localStorage.setItem(\n          `loginFormData`,\n          JSON.stringify(Object.fromEntries(formData))\n      );\n\n      Object.entries(fieldElements).forEach(([name]) => {\n        updateStateErrors(state, name);\n      });\n      updateValidationState(state.form.errors);\n\n      if (state.form.valid) {\n        state.form.processState = `finished`;\n      } else {\n        const {errors} = state.form;\n        state.form.processState = `filling`;\n        for (const name of Object.keys(errors)) {\n          if (errors[name] !== 0) {\n            fieldElements[name].focus();\n            break;\n          }\n        }\n      }\n    });\n\n    // показать / скрыть пароль формы\n    const showPassword = (event) => {\n      const {target, type} = event;\n      const input = target.previousElementSibling;\n      if (type === `mousedown`) {\n        input.setAttribute(`type`, `text`);\n      } else if (\n        (type === `keydown` && event.keyCode === 13) ||\n        (type === `keydown` && event.keyCode === 32)\n      ) {\n        input.setAttribute(`type`, `text`);\n      }\n    };\n\n    const hidePassword = ({target}) => {\n      const input = target.previousElementSibling;\n      input.setAttribute(`type`, `password`);\n    };\n\n    [`mousedown`, `keydown`].forEach((event) => {\n      fieldElements[`password`].nextElementSibling.addEventListener(\n          event,\n          showPassword\n      );\n    });\n\n    [`mouseup`, `keyup`].forEach((event) =>\n      fieldElements[`password`].nextElementSibling.addEventListener(\n          event,\n          hidePassword\n      )\n    );\n\n    // Скрытие модального окна\n    const modalCloseButtons = document.querySelectorAll(`.modal__trigger`);\n    const modalOverlays = document.querySelectorAll(`.modal__overlay`);\n    const events = [`click`, `keydown`];\n\n    if (modalCloseButtons) {\n      events.forEach((event) =>\n        modalCloseButtons.forEach((modalCloseButton) =>\n          modalCloseButton.addEventListener(event, (e) => {\n            const {type, target} = e;\n            if (type === `keydown`) {\n              if (e.keyCode === 32 || e.keyCode === 13) {\n                helpers.modal.hide(\n                    target.closest(`#${target.dataset.modal}`).closest(`.modal`)\n                );\n                helpers.scroll.enable();\n              }\n            } else if (type === `click`) {\n              helpers.modal.hide(\n                  target.closest(`#${target.dataset.modal}`).closest(`.modal`)\n              );\n              helpers.scroll.enable();\n            }\n          })\n        )\n      );\n    }\n\n    if (modalOverlays) {\n      modalOverlays.forEach((modalOverlay) =>\n        modalOverlay.addEventListener(`click`, ({target}) => {\n          helpers.modal.hide(target.closest(`.modal`));\n          helpers.scroll.enable();\n        })\n      );\n    }\n  }\n});\n"]}